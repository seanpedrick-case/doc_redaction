<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>User guide – Document Redaction App</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-e31584831b205ffbb2d98406f31c2a5b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Document Redaction App</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../src/user_guide.html" aria-current="page"> 
<span class="menu-text">User guide</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../src/faq.html"> 
<span class="menu-text">User FAQ</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../src/installation_guide.html"> 
<span class="menu-text">App installation guide (with CDK)</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../src/app_settings.html"> 
<span class="menu-text">App settings management guide</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#table-of-contents" id="toc-table-of-contents" class="nav-link active" data-scroll-target="#table-of-contents">Table of contents</a>
  <ul class="collapse">
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting Started</a></li>
  <li><a href="#advanced-user-guide" id="toc-advanced-user-guide" class="nav-link" data-scroll-target="#advanced-user-guide">Advanced user guide</a></li>
  <li><a href="#features-for-expert-userssystem-administrators" id="toc-features-for-expert-userssystem-administrators" class="nav-link" data-scroll-target="#features-for-expert-userssystem-administrators">Features for expert users/system administrators</a></li>
  </ul></li>
  <li><a href="#built-in-example-data" id="toc-built-in-example-data" class="nav-link" data-scroll-target="#built-in-example-data">Built-in example data</a>
  <ul class="collapse">
  <li><a href="#using-built-in-examples" id="toc-using-built-in-examples" class="nav-link" data-scroll-target="#using-built-in-examples">Using built-in examples</a></li>
  <li><a href="#external-example-files-optional" id="toc-external-example-files-optional" class="nav-link" data-scroll-target="#external-example-files-optional">External example files (optional)</a></li>
  </ul></li>
  <li><a href="#basic-redaction" id="toc-basic-redaction" class="nav-link" data-scroll-target="#basic-redaction">Basic redaction</a>
  <ul class="collapse">
  <li><a href="#upload-files-to-the-app" id="toc-upload-files-to-the-app" class="nav-link" data-scroll-target="#upload-files-to-the-app">Upload files to the app</a></li>
  <li><a href="#text-extraction" id="toc-text-extraction" class="nav-link" data-scroll-target="#text-extraction">Text extraction</a></li>
  <li><a href="#enable-aws-textract-signature-extraction" id="toc-enable-aws-textract-signature-extraction" class="nav-link" data-scroll-target="#enable-aws-textract-signature-extraction">Enable AWS Textract signature extraction</a></li>
  <li><a href="#pii-redaction-method" id="toc-pii-redaction-method" class="nav-link" data-scroll-target="#pii-redaction-method">PII redaction method</a></li>
  <li><a href="#allow-list-deny-list-and-whole-page-redaction" id="toc-allow-list-deny-list-and-whole-page-redaction" class="nav-link" data-scroll-target="#allow-list-deny-list-and-whole-page-redaction">Allow list, deny list, and whole-page redaction</a></li>
  <li><a href="#optional---costs-and-time-estimation" id="toc-optional---costs-and-time-estimation" class="nav-link" data-scroll-target="#optional---costs-and-time-estimation">Optional - costs and time estimation</a></li>
  <li><a href="#optional---cost-code-selection" id="toc-optional---cost-code-selection" class="nav-link" data-scroll-target="#optional---cost-code-selection">Optional - cost code selection</a></li>
  <li><a href="#optional---submit-whole-documents-to-textract-api" id="toc-optional---submit-whole-documents-to-textract-api" class="nav-link" data-scroll-target="#optional---submit-whole-documents-to-textract-api">Optional - Submit whole documents to Textract API</a></li>
  <li><a href="#run-redaction" id="toc-run-redaction" class="nav-link" data-scroll-target="#run-redaction">Run redaction</a></li>
  <li><a href="#redaction-outputs" id="toc-redaction-outputs" class="nav-link" data-scroll-target="#redaction-outputs">Redaction outputs</a></li>
  <li><a href="#additional-aws-textract-local-ocr-outputs" id="toc-additional-aws-textract-local-ocr-outputs" class="nav-link" data-scroll-target="#additional-aws-textract-local-ocr-outputs">Additional AWS Textract / local OCR outputs</a></li>
  <li><a href="#downloading-output-files-from-previous-redaction-tasks" id="toc-downloading-output-files-from-previous-redaction-tasks" class="nav-link" data-scroll-target="#downloading-output-files-from-previous-redaction-tasks">Downloading output files from previous redaction tasks</a></li>
  <li><a href="#basic-redaction-summary" id="toc-basic-redaction-summary" class="nav-link" data-scroll-target="#basic-redaction-summary">Basic redaction summary</a></li>
  </ul></li>
  <li><a href="#customising-redaction-options" id="toc-customising-redaction-options" class="nav-link" data-scroll-target="#customising-redaction-options">Customising redaction options</a>
  <ul class="collapse">
  <li><a href="#custom-allow-deny-and-page-redaction-lists" id="toc-custom-allow-deny-and-page-redaction-lists" class="nav-link" data-scroll-target="#custom-allow-deny-and-page-redaction-lists">Custom allow, deny, and page redaction lists</a></li>
  <li><a href="#redacting-additional-types-of-personal-information" id="toc-redacting-additional-types-of-personal-information" class="nav-link" data-scroll-target="#redacting-additional-types-of-personal-information">Redacting additional types of personal information</a></li>
  <li><a href="#redacting-only-specific-pages" id="toc-redacting-only-specific-pages" class="nav-link" data-scroll-target="#redacting-only-specific-pages">Redacting only specific pages</a></li>
  <li><a href="#handwriting-and-signature-redaction" id="toc-handwriting-and-signature-redaction" class="nav-link" data-scroll-target="#handwriting-and-signature-redaction">Handwriting and signature redaction</a></li>
  </ul></li>
  <li><a href="#reviewing-and-modifying-suggested-redactions" id="toc-reviewing-and-modifying-suggested-redactions" class="nav-link" data-scroll-target="#reviewing-and-modifying-suggested-redactions">Reviewing and modifying suggested redactions</a>
  <ul class="collapse">
  <li><a href="#uploading-documents-for-review" id="toc-uploading-documents-for-review" class="nav-link" data-scroll-target="#uploading-documents-for-review">Uploading documents for review</a></li>
  <li><a href="#page-navigation" id="toc-page-navigation" class="nav-link" data-scroll-target="#page-navigation">Page navigation</a></li>
  <li><a href="#the-document-viewer-pane" id="toc-the-document-viewer-pane" class="nav-link" data-scroll-target="#the-document-viewer-pane">The document viewer pane</a></li>
  <li><a href="#apply-redactions-to-pdf-and-save-changes-on-current-page" id="toc-apply-redactions-to-pdf-and-save-changes-on-current-page" class="nav-link" data-scroll-target="#apply-redactions-to-pdf-and-save-changes-on-current-page">Apply redactions to PDF and Save changes on current page</a></li>
  <li><a href="#selecting-and-removing-redaction-boxes-using-the-search-suggested-redactions-table" id="toc-selecting-and-removing-redaction-boxes-using-the-search-suggested-redactions-table" class="nav-link" data-scroll-target="#selecting-and-removing-redaction-boxes-using-the-search-suggested-redactions-table">Selecting and removing redaction boxes using the ‘Search suggested redactions’ table</a></li>
  <li><a href="#searching-and-adding-custom-redactions" id="toc-searching-and-adding-custom-redactions" class="nav-link" data-scroll-target="#searching-and-adding-custom-redactions">Searching and Adding Custom Redactions</a></li>
  <li><a href="#navigating-through-the-document-using-the-search-all-extracted-text" id="toc-navigating-through-the-document-using-the-search-all-extracted-text" class="nav-link" data-scroll-target="#navigating-through-the-document-using-the-search-all-extracted-text">Navigating through the document using the ‘Search all extracted text’</a></li>
  </ul></li>
  <li><a href="#redacting-word-tabular-data-files-xlsxcsv-or-copy-and-pasted-text" id="toc-redacting-word-tabular-data-files-xlsxcsv-or-copy-and-pasted-text" class="nav-link" data-scroll-target="#redacting-word-tabular-data-files-xlsxcsv-or-copy-and-pasted-text">Redacting Word, tabular data files (XLSX/CSV) or copy and pasted text</a>
  <ul class="collapse">
  <li><a href="#word-or-tabular-data-files-xlsxcsv" id="toc-word-or-tabular-data-files-xlsxcsv" class="nav-link" data-scroll-target="#word-or-tabular-data-files-xlsxcsv">Word or tabular data files (XLSX/CSV)</a></li>
  <li><a href="#choosing-output-anonymisation-format" id="toc-choosing-output-anonymisation-format" class="nav-link" data-scroll-target="#choosing-output-anonymisation-format">Choosing output anonymisation format</a></li>
  <li><a href="#redacting-copy-and-pasted-text" id="toc-redacting-copy-and-pasted-text" class="nav-link" data-scroll-target="#redacting-copy-and-pasted-text">Redacting copy and pasted text</a></li>
  <li><a href="#redaction-log-outputs" id="toc-redaction-log-outputs" class="nav-link" data-scroll-target="#redaction-log-outputs">Redaction log outputs</a></li>
  </ul></li>
  <li><a href="#identifying-and-redacting-duplicate-pages" id="toc-identifying-and-redacting-duplicate-pages" class="nav-link" data-scroll-target="#identifying-and-redacting-duplicate-pages">Identifying and redacting duplicate pages</a>
  <ul class="collapse">
  <li><a href="#duplicate-page-detection-in-documents" id="toc-duplicate-page-detection-in-documents" class="nav-link" data-scroll-target="#duplicate-page-detection-in-documents">Duplicate page detection in documents</a></li>
  <li><a href="#duplicate-detection-in-tabular-data" id="toc-duplicate-detection-in-tabular-data" class="nav-link" data-scroll-target="#duplicate-detection-in-tabular-data">Duplicate detection in tabular data</a></li>
  </ul></li>
  <li><a href="#advanced-user-guide-1" id="toc-advanced-user-guide-1" class="nav-link" data-scroll-target="#advanced-user-guide-1">Advanced user guide</a>
  <ul class="collapse">
  <li><a href="#fuzzy-search-and-redaction" id="toc-fuzzy-search-and-redaction" class="nav-link" data-scroll-target="#fuzzy-search-and-redaction">Fuzzy search and redaction</a></li>
  <li><a href="#export-to-and-import-from-adobe" id="toc-export-to-and-import-from-adobe" class="nav-link" data-scroll-target="#export-to-and-import-from-adobe">Export to and import from Adobe</a>
  <ul class="collapse">
  <li><a href="#using-_for_review.pdf-files-with-adobe-acrobat" id="toc-using-_for_review.pdf-files-with-adobe-acrobat" class="nav-link" data-scroll-target="#using-_for_review.pdf-files-with-adobe-acrobat">Using _for_review.pdf files with Adobe Acrobat</a></li>
  <li><a href="#exporting-to-adobe-acrobat" id="toc-exporting-to-adobe-acrobat" class="nav-link" data-scroll-target="#exporting-to-adobe-acrobat">Exporting to Adobe Acrobat</a></li>
  <li><a href="#importing-from-adobe-acrobat" id="toc-importing-from-adobe-acrobat" class="nav-link" data-scroll-target="#importing-from-adobe-acrobat">Importing from Adobe Acrobat</a></li>
  </ul></li>
  <li><a href="#using-the-aws-textract-document-api" id="toc-using-the-aws-textract-document-api" class="nav-link" data-scroll-target="#using-the-aws-textract-document-api">Using the AWS Textract document API</a>
  <ul class="collapse">
  <li><a href="#starting-a-new-textract-api-job" id="toc-starting-a-new-textract-api-job" class="nav-link" data-scroll-target="#starting-a-new-textract-api-job">Starting a new Textract API job</a></li>
  <li><a href="#textract-api-job-outputs" id="toc-textract-api-job-outputs" class="nav-link" data-scroll-target="#textract-api-job-outputs">Textract API job outputs</a></li>
  </ul></li>
  <li><a href="#modifying-existing-redaction-review-files" id="toc-modifying-existing-redaction-review-files" class="nav-link" data-scroll-target="#modifying-existing-redaction-review-files">Modifying existing redaction review files</a>
  <ul class="collapse">
  <li><a href="#inside-the-app" id="toc-inside-the-app" class="nav-link" data-scroll-target="#inside-the-app">Inside the app</a></li>
  <li><a href="#outside-the-app" id="toc-outside-the-app" class="nav-link" data-scroll-target="#outside-the-app">Outside the app</a></li>
  </ul></li>
  <li><a href="#merging-redaction-review-files" id="toc-merging-redaction-review-files" class="nav-link" data-scroll-target="#merging-redaction-review-files">Merging redaction review files</a></li>
  </ul></li>
  <li><a href="#features-for-expert-userssystem-administrators-1" id="toc-features-for-expert-userssystem-administrators-1" class="nav-link" data-scroll-target="#features-for-expert-userssystem-administrators-1">Features for expert users/system administrators</a>
  <ul class="collapse">
  <li><a href="#using-aws-textract-and-comprehend-when-not-running-in-an-aws-environment" id="toc-using-aws-textract-and-comprehend-when-not-running-in-an-aws-environment" class="nav-link" data-scroll-target="#using-aws-textract-and-comprehend-when-not-running-in-an-aws-environment">Using AWS Textract and Comprehend when not running in an AWS environment</a>
  <ul class="collapse">
  <li><a href="#direct-access-by-passing-aws-access-keys-through-app" id="toc-direct-access-by-passing-aws-access-keys-through-app" class="nav-link" data-scroll-target="#direct-access-by-passing-aws-access-keys-through-app">Direct access by passing AWS access keys through app</a></li>
  <li><a href="#picking-up-aws-access-keys-through-an-.env-file" id="toc-picking-up-aws-access-keys-through-an-.env-file" class="nav-link" data-scroll-target="#picking-up-aws-access-keys-through-an-.env-file">Picking up AWS access keys through an .env file</a></li>
  </ul></li>
  <li><a href="#advanced-ocr-options" id="toc-advanced-ocr-options" class="nav-link" data-scroll-target="#advanced-ocr-options">Advanced OCR options</a>
  <ul class="collapse">
  <li><a href="#available-ocr-models" id="toc-available-ocr-models" class="nav-link" data-scroll-target="#available-ocr-models">Available OCR models</a></li>
  <li><a href="#enabling-advanced-ocr-options" id="toc-enabling-advanced-ocr-options" class="nav-link" data-scroll-target="#enabling-advanced-ocr-options">Enabling advanced OCR options</a></li>
  <li><a href="#ocr-configuration-parameters" id="toc-ocr-configuration-parameters" class="nav-link" data-scroll-target="#ocr-configuration-parameters">OCR configuration parameters</a></li>
  <li><a href="#using-an-alternative-ocr-model" id="toc-using-an-alternative-ocr-model" class="nav-link" data-scroll-target="#using-an-alternative-ocr-model">Using an alternative OCR model</a></li>
  <li><a href="#inference-server-options" id="toc-inference-server-options" class="nav-link" data-scroll-target="#inference-server-options">Inference server options</a></li>
  <li><a href="#identifying-people-and-signatures-with-vlms" id="toc-identifying-people-and-signatures-with-vlms" class="nav-link" data-scroll-target="#identifying-people-and-signatures-with-vlms">Identifying people and signatures with VLMs</a></li>
  <li><a href="#pii-identification-with-llms" id="toc-pii-identification-with-llms" class="nav-link" data-scroll-target="#pii-identification-with-llms">PII identification with LLMs</a></li>
  </ul></li>
  <li><a href="#document-summarisation-tab" id="toc-document-summarisation-tab" class="nav-link" data-scroll-target="#document-summarisation-tab">Document summarisation tab</a></li>
  <li><a href="#command-line-interface-cli" id="toc-command-line-interface-cli" class="nav-link" data-scroll-target="#command-line-interface-cli">Command Line Interface (CLI)</a>
  <ul class="collapse">
  <li><a href="#getting-started-with-the-cli" id="toc-getting-started-with-the-cli" class="nav-link" data-scroll-target="#getting-started-with-the-cli">Getting started with the CLI</a></li>
  <li><a href="#basic-cli-syntax" id="toc-basic-cli-syntax" class="nav-link" data-scroll-target="#basic-cli-syntax">Basic CLI syntax</a></li>
  <li><a href="#redaction-examples" id="toc-redaction-examples" class="nav-link" data-scroll-target="#redaction-examples">Redaction examples</a></li>
  <li><a href="#tabular-data-redaction" id="toc-tabular-data-redaction" class="nav-link" data-scroll-target="#tabular-data-redaction">Tabular data redaction</a></li>
  <li><a href="#duplicate-detection" id="toc-duplicate-detection" class="nav-link" data-scroll-target="#duplicate-detection">Duplicate detection</a></li>
  <li><a href="#aws-textract-operations" id="toc-aws-textract-operations" class="nav-link" data-scroll-target="#aws-textract-operations">AWS Textract operations</a></li>
  <li><a href="#document-summarisation" id="toc-document-summarisation" class="nav-link" data-scroll-target="#document-summarisation">Document summarisation</a></li>
  <li><a href="#common-cli-options" id="toc-common-cli-options" class="nav-link" data-scroll-target="#common-cli-options">Common CLI options</a></li>
  <li><a href="#output-files" id="toc-output-files" class="nav-link" data-scroll-target="#output-files">Output files</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">User guide</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="table-of-contents" class="level2">
<h2 class="anchored" data-anchor-id="table-of-contents">Table of contents</h2>
<section id="getting-started" class="level3">
<h3 class="anchored" data-anchor-id="getting-started">Getting Started</h3>
<ul>
<li><a href="#built-in-example-data">Built-in example data</a></li>
<li><a href="#basic-redaction">Basic redaction</a></li>
<li><a href="#customising-redaction-options">Customising redaction options</a>
<ul>
<li><a href="#custom-allow-deny-and-page-redaction-lists">Custom allow, deny, and page redaction lists</a>
<ul>
<li><a href="#allow-list-example">Allow list example</a></li>
<li><a href="#deny-list-example">Deny list example</a></li>
<li><a href="#full-page-redaction-list-example">Full page redaction list example</a></li>
</ul></li>
<li><a href="#redacting-additional-types-of-personal-information">Redacting additional types of personal information</a></li>
<li><a href="#redacting-only-specific-pages">Redacting only specific pages</a></li>
<li><a href="#handwriting-and-signature-redaction">Handwriting and signature redaction</a></li>
</ul></li>
<li><a href="#reviewing-and-modifying-suggested-redactions">Reviewing and modifying suggested redactions</a></li>
<li><a href="#redacting-word-tabular-data-files-xlsxcsv-or-copy-and-pasted-text">Redacting Word, tabular data files (CSV/XLSX) or copy and pasted text</a></li>
<li><a href="#identifying-and-redacting-duplicate-pages">Identifying and redacting duplicate pages</a></li>
</ul>
</section>
<section id="advanced-user-guide" class="level3">
<h3 class="anchored" data-anchor-id="advanced-user-guide">Advanced user guide</h3>
<ul>
<li><a href="#fuzzy-search-and-redaction">Fuzzy search and redaction</a></li>
<li><a href="#export-to-and-import-from-adobe">Export redactions to and import from Adobe Acrobat</a>
<ul>
<li><a href="#using-_for_reviewpdf-files-with-adobe-acrobat">Using _for_review.pdf files with Adobe Acrobat</a></li>
<li><a href="#exporting-to-adobe-acrobat">Exporting to Adobe Acrobat</a></li>
<li><a href="#importing-from-adobe-acrobat">Importing from Adobe Acrobat</a></li>
</ul></li>
<li><a href="#using-the-aws-textract-document-api">Using the AWS Textract document API</a></li>
<li><a href="#using-aws-textract-and-comprehend-when-not-running-in-an-aws-environment">Using AWS Textract and Comprehend when not running in an AWS environment</a></li>
<li><a href="#modifying-existing-redaction-review-files">Modifying existing redaction review files</a></li>
<li><a href="#merging-redaction-review-files">Merging redaction review files</a></li>
</ul>
</section>
<section id="features-for-expert-userssystem-administrators" class="level3">
<h3 class="anchored" data-anchor-id="features-for-expert-userssystem-administrators">Features for expert users/system administrators</h3>
<ul>
<li><a href="#advanced-ocr-options-hybrid-ocr">Advanced OCR options (Hybrid OCR)</a></li>
<li><a href="#pii-identification-with-llms">PII identification with LLMs</a></li>
<li><a href="#document-summarisation-tab">Document summarisation tab</a></li>
<li><a href="#command-line-interface-cli">Command Line Interface (CLI)</a></li>
</ul>
</section>
</section>
<section id="built-in-example-data" class="level2">
<h2 class="anchored" data-anchor-id="built-in-example-data">Built-in example data</h2>
<p>The app now includes built-in example files that you can use to quickly test different features. These examples are automatically loaded and can be accessed directly from the interface without needing to download files separately.</p>
<section id="using-built-in-examples" class="level3">
<h3 class="anchored" data-anchor-id="using-built-in-examples">Using built-in examples</h3>
<p><strong>For PDF/image redaction:</strong> On the ‘Redact PDFs/images’ tab, you’ll see a section titled “Try an example - Click on an example below and then the ‘Extract text and redact document’ button”. Simply click on any of the available examples to load them with pre-configured settings:</p>
<ul>
<li><strong>PDF with selectable text redaction</strong> - Uses local text extraction with standard PII detection</li>
<li><strong>Image redaction with local OCR</strong> - Processes an image file using OCR</li>
<li><strong>PDF redaction with custom entities</strong> - Demonstrates custom entity selection (Titles, Person, Dates)</li>
<li><strong>PDF redaction with AWS services and signature detection</strong> - Shows AWS Textract with signature extraction (if AWS is enabled)</li>
<li><strong>PDF redaction with custom deny list and whole page redaction</strong> - Demonstrates advanced redaction features</li>
</ul>
<p>Once you have clicked on an example, you can click the ‘Extract text and redact document’ button to load the example into the app and redact it.</p>
<p><strong>For tabular data:</strong> On the ‘Word or Excel/csv files’ tab, you’ll find examples for both redaction and duplicate detection:</p>
<ul>
<li><strong>CSV file redaction</strong> - Shows how to redact specific columns in tabular data</li>
<li><strong>Word document redaction</strong> - Demonstrates Word document processing</li>
<li><strong>Excel file duplicate detection</strong> - Shows how to find duplicate rows in spreadsheet data</li>
</ul>
<p>Once you have clicked on an example, you can click the ‘Redact text/data files’ button to load the example into the app and redact it. For the duplicate detection example, you can click the ‘Find duplicate cells/rows’ button to load the example into the app and find duplicates.</p>
<p><strong>For duplicate page detection:</strong> On the ‘Identify duplicate pages’ tab, you’ll find examples for finding duplicate content in documents:</p>
<ul>
<li><strong>Find duplicate pages of text in document OCR outputs</strong> - Uses page-level analysis with a similarity threshold of 0.95 and minimum word count of 10</li>
<li><strong>Find duplicate text lines in document OCR outputs</strong> - Uses line-level analysis with a similarity threshold of 0.95 and minimum word count of 3</li>
</ul>
<p>Once you have clicked on an example, you can click the ‘Identify duplicate pages/subdocuments’ button to load the example into the app and find duplicate content.</p>
</section>
<section id="external-example-files-optional" class="level3">
<h3 class="anchored" data-anchor-id="external-example-files-optional">External example files (optional)</h3>
<p>If you prefer to use your own example files or want to follow along with specific tutorials, you can still download these external example files:</p>
<ul>
<li><a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/example_of_emails_sent_to_a_professor_before_applying.pdf">Example of files sent to a professor before applying</a></li>
<li><a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/example_complaint_letter.jpg">Example complaint letter (jpg)</a></li>
<li><a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/Partnership-Agreement-Toolkit_0_0.pdf">Partnership Agreement Toolkit (for signatures and more advanced usage)</a></li>
<li><a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/combined_case_notes.csv">Dummy case note data</a></li>
</ul>
</section>
</section>
<section id="basic-redaction" class="level2">
<h2 class="anchored" data-anchor-id="basic-redaction">Basic redaction</h2>
<p>The document redaction app can detect personally-identifiable information (PII) in documents. Documents can be redacted directly, or suggested redactions can be reviewed and modified using a graphical user interface. Basic document redaction can be performed quickly using the default options.</p>
<p>Download the example PDFs above to your computer. Open the redaction app with the link provided by email.</p>
<p><strong>Where to work:</strong> All of the main redaction options and the redact button are on the <strong>‘Redact PDFs/images’</strong> tab. When the quickstart walkthrough is not shown, this tab opens with a <strong>‘Redaction settings’</strong> accordion <strong>open by default</strong>, so you can upload files and adjust options without switching tabs.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/file_upload_highlight.PNG" class="img-fluid figure-img"></p>
<figcaption>Upload files</figcaption>
</figure>
</div>
<section id="upload-files-to-the-app" class="level3">
<h3 class="anchored" data-anchor-id="upload-files-to-the-app">Upload files to the app</h3>
<p>On the <strong>‘Redact PDFs/images’</strong> tab, the <strong>‘Redaction settings’</strong> accordion at the top accepts PDFs and image files (JPG, PNG) for redaction. Click on the <strong>‘Drop files here or Click to Upload’</strong> area and select one or more <a href="#example-data-files">example files</a> (store them in the same folder if you want to redact several at once).</p>
</section>
<section id="text-extraction" class="level3">
<h3 class="anchored" data-anchor-id="text-extraction">Text extraction</h3>
<p>Inside the same <strong>‘Redaction settings’</strong> accordion, open the nested accordion <strong>‘Change default redaction settings’</strong> (it may already be open). If enabled, under <strong>‘Change default text extraction OCR method’</strong> you can choose how text is extracted:</p>
<ul>
<li><strong>‘Local model - selectable text’</strong> - Reads text directly from PDFs that have selectable text (using PikePDF). Best for most PDFs; finds nothing if the PDF has no selectable text and is not suitable for handwriting or signatures. Image files are passed to the next option.</li>
<li><strong>‘Local OCR model - PDFs without selectable text’</strong> - Uses a local OCR model (Tesseract) to extract text from PDFs/images. Handles most typed text without selectable text but is less reliable for handwriting and signatures; use the AWS option below if you need those.</li>
<li><strong>‘AWS Textract service - all PDF types’</strong> - Available when the app is configured for AWS. Textract runs in the cloud and is more capable for complex layouts, handwriting, and signatures. It incurs a (relatively small) cost per page.</li>
</ul>
</section>
<section id="enable-aws-textract-signature-extraction" class="level3">
<h3 class="anchored" data-anchor-id="enable-aws-textract-signature-extraction">Enable AWS Textract signature extraction</h3>
<p>If you select <strong>‘AWS Textract service - all PDF types’</strong> as the text extraction method, an accordion <strong>‘Enable AWS Textract signature detection (default is off)’</strong> appears. Open it to turn on handwriting and/or signature detection. Enabling signatures has a cost impact (~£2.66 ($3.50) per 1,000 pages vs ~£1.14 ($1.50) per 1,000 pages without signature detection).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/textract_handwriting_signatures.PNG" class="img-fluid figure-img"></p>
<figcaption>AWS Textract handwriting and signature options</figcaption>
</figure>
</div>
<p><strong>NOTE:</strong> Form, layout, and table extraction with AWS Textract can be enabled by your system administrator in the config; they are off by default.</p>
</section>
<section id="pii-redaction-method" class="level3">
<h3 class="anchored" data-anchor-id="pii-redaction-method">PII redaction method</h3>
<p>At the start of the <strong>‘Change PII identification method’</strong> accordion (under <strong>‘Change default redaction settings’</strong>) you will see <strong>‘Choose redaction method’</strong>, a radio with three options. <strong>‘Extract text only’</strong> runs text extraction without redaction—useful when you only need OCR output or want to review text before redacting; when selected, the <strong>‘Select entity types to redact’</strong> and <strong>‘Terms to always include or exclude in redactions…’</strong> accordions are hidden. <strong>‘Redact all PII’</strong> (the default) uses the chosen PII detection method to find and redact personal information; the entity-types accordion is shown and the terms (allow/deny/page) accordion is hidden. <strong>‘Redact selected terms’</strong> shows both accordions and focuses on custom allow/deny lists and entity types (e.g.&nbsp;CUSTOM) so you can redact only the terms you specify.</p>
<p>Still under <strong>‘Change default redaction settings’</strong>, you may see the <strong>‘Change PII identification method’</strong> section, if enabled, which lets you choose how PII is detected:</p>
<ul>
<li><strong>‘Only extract text - (no redaction)’</strong> - Use this if you only need extracted text (e.g.&nbsp;for duplicate detection or to review on the Review redactions tab).</li>
<li><strong>‘Local’</strong> - Uses a local model (e.g.&nbsp;spaCy) to detect PII at no extra cost. Often enough when you mainly care about custom terms (see <a href="#customising-redaction-options">Customising redaction options</a>).</li>
<li><strong>‘AWS Comprehend’</strong> - Uses AWS Comprehend for PII detection when the app is configured for AWS; typically more accurate but incurs a cost (around £0.0075 ($0.01) per 10,000 characters).</li>
</ul>
<p>Under <strong>‘Select entity types to redact’</strong> you can choose which types of PII to redact (e.g.&nbsp;names, emails, dates). The dropdown label varies by method (Local, AWS Comprehend, or LLM); click in the box or near the dropdown arrow to see the full list.</p>
</section>
<section id="allow-list-deny-list-and-whole-page-redaction" class="level3">
<h3 class="anchored" data-anchor-id="allow-list-deny-list-and-whole-page-redaction">Allow list, deny list, and whole-page redaction</h3>
<p>On the same <strong>‘Redaction settings’</strong> accordion you will see <strong>‘Terms to always include or exclude in redactions, and whole page redaction’</strong>. Here you can:</p>
<ul>
<li><strong>Allow list</strong> – Terms that should never be redacted.</li>
<li><strong>Deny list</strong> – Terms that should always be redacted.</li>
<li><strong>Fully redact these pages</strong> – Page numbers that should be fully redacted.</li>
<li><strong>Redact duplicate pages</strong> – Checkbox: when enabled, the app identifies duplicate pages and redacts them in the same run (see <a href="#identifying-and-redacting-duplicate-pages">Identifying and redacting duplicate pages</a>).</li>
<li><strong>Maximum spelling mistakes for matching deny list terms</strong> – Number (0–9) used for <a href="#fuzzy-search-and-redaction">fuzzy matching</a> when <strong>CUSTOM_FUZZY</strong> is selected in the entity list.</li>
</ul>
<p>You can add or remove terms directly in these controls. To load many terms from a file (e.g.&nbsp;a CSV), use the <strong>Settings</strong> tab; see <a href="#custom-allow-deny-and-page-redaction-lists">Custom allow, deny, and page redaction lists</a>.</p>
</section>
<section id="optional---costs-and-time-estimation" class="level3">
<h3 class="anchored" data-anchor-id="optional---costs-and-time-estimation">Optional - costs and time estimation</h3>
<p>If your administrator has enabled it (in the config), an <strong>‘Estimated costs and time taken’</strong> section appears on the <strong>‘Redact PDFs/images’</strong> tab. <strong>‘Existing Textract output file found’</strong> (or <strong>‘Existing local OCR output file found’</strong>) is ticked automatically when previous extraction output exists in the output folder or was <a href="#aws-textract-outputs">uploaded by you</a>, which can save time and cost.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/costs_and_time.PNG" class="img-fluid figure-img"></p>
<figcaption>Cost and time estimation</figcaption>
</figure>
</div>
</section>
<section id="optional---cost-code-selection" class="level3">
<h3 class="anchored" data-anchor-id="optional---cost-code-selection">Optional - cost code selection</h3>
<p>If cost codes are enabled, an <strong>‘Assign task to cost code’</strong> section appears on the same tab. Choose a cost code before running redaction. You can search the table or type in the <strong>‘Choose cost code for analysis’</strong> dropdown to filter.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/cost_code_selection.PNG" class="img-fluid figure-img"></p>
<figcaption>Cost code selection</figcaption>
</figure>
</div>
</section>
<section id="optional---submit-whole-documents-to-textract-api" class="level3">
<h3 class="anchored" data-anchor-id="optional---submit-whole-documents-to-textract-api">Optional - Submit whole documents to Textract API</h3>
<p>If enabled by your administrator, an accordion <strong>‘Submit whole document to AWS Textract API (quickest text extraction for large documents)’</strong> appears on the <strong>‘Redact PDFs/images’</strong> tab. This sends whole documents to Textract for fast extraction, separate from the main redaction flow. Details are in the <a href="#using-the-aws-textract-document-api">advanced user guide</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/textract_document_api.PNG" class="img-fluid figure-img"></p>
<figcaption>Textract document API</figcaption>
</figure>
</div>
</section>
<section id="run-redaction" class="level3">
<h3 class="anchored" data-anchor-id="run-redaction">Run redaction</h3>
<p>At the bottom of the <strong>‘Redact PDFs/images’</strong> tab, open the <strong>‘Extract text and redact document’</strong> accordion and click <strong>‘Extract text and redact document’</strong>. The app will process the document (typically around 30 pages per minute, depending on options). When finished, a message will indicate completion and output files will appear in the <strong>‘Output files’</strong> area. Use <strong>‘Review and modify redactions’</strong> to open the review tab.</p>
</section>
<section id="redaction-outputs" class="level3">
<h3 class="anchored" data-anchor-id="redaction-outputs">Redaction outputs</h3>
<p>After you click <strong>‘Extract text and redact document’</strong>, the <strong>‘Output files’</strong> area on the <strong>‘Redact PDFs/images’</strong> tab shows:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/redaction_outputs.PNG" class="img-fluid figure-img"></p>
<figcaption>Redaction outputs</figcaption>
</figure>
</div>
<ul>
<li><strong>‘…redacted.pdf’</strong> – The original PDF with suggested redactions applied (text removed and replaced by a black box).</li>
<li><strong>‘…redactions_for_review.pdf’</strong> – The original PDF with redaction boxes overlaid but text still visible. Use this in Adobe Acrobat or other PDF viewers to review suggested redactions before finalising.</li>
<li><strong>‘…ocr_results.csv’</strong> – Line-by-line extracted text from the document (useful for searching in Excel or similar).</li>
<li><strong>‘…review_file.csv’</strong> – Details and locations of all suggested redactions; required for the <a href="#reviewing-and-modifying-suggested-redactions">review process</a>.</li>
</ul>
</section>
<section id="additional-aws-textract-local-ocr-outputs" class="level3">
<h3 class="anchored" data-anchor-id="additional-aws-textract-local-ocr-outputs">Additional AWS Textract / local OCR outputs</h3>
<p>If you used <strong>AWS Textract</strong> for text extraction, you may also see a **’…_textract.json’** file. You can keep this and upload it later with your input document to skip calling Textract again for the same document:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/document_upload_with_textract.PNG" class="img-fluid figure-img"></p>
<figcaption>Document upload alongside Textract</figcaption>
</figure>
</div>
<p>Similarly, if you used local OCR you may see a **’…_ocr_results_with_words… .json’** file, which can be uploaded with the input document to save time on future runs.</p>
<section id="log-file-outputs-and-other-optional-outputs" class="level4">
<h4 class="anchored" data-anchor-id="log-file-outputs-and-other-optional-outputs">Log file outputs and other optional outputs</h4>
<p>On the <strong>Settings</strong> tab, open the <strong>‘Log file outputs’</strong> accordion to access log and optional output files. You may see a <strong>‘decision_process_table.csv’</strong> (decisions made per page) and, if enabled by your administrator, **’…_visualisations.jpg’** images showing OCR bounding boxes per page:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/example_complaint_letter_1_textract_visualisations.jpg" class="img-fluid figure-img"></p>
<figcaption>Text analysis output</figcaption>
</figure>
</div>
</section>
</section>
<section id="downloading-output-files-from-previous-redaction-tasks" class="level3">
<h3 class="anchored" data-anchor-id="downloading-output-files-from-previous-redaction-tasks">Downloading output files from previous redaction tasks</h3>
<p>If you are logged in via AWS Cognito and lose the app page (e.g.&nbsp;after a crash or reload), you may still recover output files if the server has not been restarted. When enabled, open the <strong>Settings</strong> tab and use <strong>‘View and download all output files from this session’</strong> at the bottom. Click <strong>‘Refresh files in output folder’</strong>, then tick the box next to a file to display and download it.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/view_all_output_files.PNG" class="img-fluid figure-img"></p>
<figcaption>View all output files</figcaption>
</figure>
</div>
</section>
<section id="basic-redaction-summary" class="level3">
<h3 class="anchored" data-anchor-id="basic-redaction-summary">Basic redaction summary</h3>
<p>You can redact documents using the options on the <strong>‘Redact PDFs/images’</strong> tab. The <strong>‘…redacted.pdf’</strong> output may be sufficient, or you may want to <a href="#customising-redaction-options">customise redaction options</a> (allow/deny lists, entity types, page range, etc.) as described below.</p>
</section>
</section>
<section id="customising-redaction-options" class="level2">
<h2 class="anchored" data-anchor-id="customising-redaction-options">Customising redaction options</h2>
<p>Most options are on the <strong>‘Redact PDFs/images’</strong> tab inside the <strong>‘Redaction settings’</strong> accordion. A few options (loading allow/deny/page lists from files, page range, efficient OCR, language, API keys) are on the <strong>Settings</strong> tab.</p>
<section id="custom-allow-deny-and-page-redaction-lists" class="level3">
<h3 class="anchored" data-anchor-id="custom-allow-deny-and-page-redaction-lists">Custom allow, deny, and page redaction lists</h3>
<p><strong>On the ‘Redact PDFs/images’ tab:</strong> Inside <strong>‘Redaction settings’</strong>, the accordion <strong>‘Terms to always include or exclude in redactions, and whole page redaction’</strong> contains the <strong>Allow list</strong>, <strong>Deny list</strong>, and <strong>Fully redact these pages</strong> controls. You can add or remove terms directly there. There is also <strong>‘Maximum spelling mistakes for matching deny list terms’</strong> for fuzzy matching.</p>
<p><strong>To load many terms from a file:</strong> Go to the <strong>Settings</strong> tab and open <strong>‘Custom allow, deny, and full page redaction lists’</strong>. Use <strong>‘Import allow list file’</strong>, <strong>‘Import custom deny list’</strong>, or <strong>‘Import fully redacted pages list’</strong> to load a CSV (one column, no header). After loading, return to the <strong>‘Redact PDFs/images’</strong> tab and click <strong>‘Extract text and redact document’</strong>; the loaded terms apply to the next run.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/allow_list/allow_deny_full_page_list.PNG" class="img-fluid figure-img"></p>
<figcaption>Custom allow, deny, and page redaction lists</figcaption>
</figure>
</div>
<section id="allow-list-example" class="level4">
<h4 class="anchored" data-anchor-id="allow-list-example">Allow list example</h4>
<p>In the redacted outputs of the ‘Example of files sent to a professor before applying’ PDF, the app may redact references to Dr Hyde’s lab. If those are not personal information in your context, add them to the allow list.You can exclude these terms from redaction in one of two ways: 1. On the Redact PDFs/images tab, go to ‘Allow list’. Type in ‘Hyde’ in the box and press enter. The next redaction task should will exclude this term from redaction. You can add other terms here. 2. Create a CSV with one term per row in the first column (e.g.&nbsp;‘Hyde’, ‘Muller glia’); an example is <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/allow_list/allow_list.csv">here</a>. On the <strong>Settings</strong> tab, open <strong>‘Custom allow, deny, and full page redaction lists’</strong>, click <strong>‘Import allow list file’</strong>, and select your CSV. Then go back to the <strong>‘Redact PDFs/images’</strong> tab and click <strong>‘Extract text and redact document’</strong>. This will then apply the loaded list to the allow list on the Redact PDFs/images tab</p>
</section>
<section id="deny-list-example" class="level4">
<h4 class="anchored" data-anchor-id="deny-list-example">Deny list example</h4>
<p>Say you wanted to remove specific terms from a document. In this app you can do this by providing a custom deny list as a csv. Like for the allow list described above, this should be a one-column csv without a column header. The app will suggest each individual term in the list with exact spelling as whole words. So it won’t select text from within words. You must have <strong>‘CUSTOM’</strong> (or equivalent) included in <strong>‘Select entity types to redact’</strong> on the <strong>‘Redact PDFs/images’</strong> tab; see <a href="#redacting-additional-types-of-personal-information">Redacting additional types of personal information</a>. As for the allow list above, you can add new deny list terms in one of two ways. Either 1. type them manually into the Deny list box on the Redact PDFs/images tab, or 2. load in a custom deny list csv file on the <strong>Settings</strong> tab (see above for Allow list). NOTE: You can also provide deny list terms in your csv file as regex patterns.</p>
<p>Here is an example using the <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/Partnership-Agreement-Toolkit_0_0.pdf">Partnership Agreement Toolkit file</a>. This is an <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/allow_list/partnership_toolkit_redact_custom_deny_list.csv">example of a custom deny list file</a>. ‘Sister’, ‘Sister City’ ‘Sister Cities’, ‘Friendship City’ have been listed as specific terms to redact. You can see the outputs of this redaction process on the review page:</p>
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/allow_list/deny_list_partnership_example.PNG" class="img-fluid" alt="Deny list redaction Partnership file">.</p>
<p>You can see that the app has highlighted all instances of these terms on the page shown. You can then consider each of these terms for modification or removal on the review page <a href="#reviewing-and-modifying-suggested-redactions">explained here</a>.</p>
</section>
<section id="full-page-redaction-list-example" class="level4">
<h4 class="anchored" data-anchor-id="full-page-redaction-list-example">Full page redaction list example</h4>
<p>To fully redact specific pages, provide a one-column CSV of page numbers (no header), e.g.&nbsp;<a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/allow_list/partnership_toolkit_redact_some_pages.csv">this example</a>. On the <strong>Settings</strong> tab, open <strong>‘Custom allow, deny, and full page redaction lists’</strong> and use <strong>‘Import fully redacted pages list’</strong>. Alternatively, add page numbers in the <strong>‘Fully redact these pages’</strong> box on the <strong>‘Redact PDFs/images’</strong> tab.</p>
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/allow_list/whole_page_partnership_example.PNG" class="img-fluid" alt="Whole page partnership redaction">.</p>
<p>Using the above approaches to allow, deny, and full page redaction lists will give you an output <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/allow_list/Partnership-Agreement-Toolkit_0_0_redacted.pdf">like this</a>.</p>
</section>
</section>
<section id="redacting-additional-types-of-personal-information" class="level3">
<h3 class="anchored" data-anchor-id="redacting-additional-types-of-personal-information">Redacting additional types of personal information</h3>
<p>On the <strong>‘Redact PDFs/images’</strong> tab, open <strong>‘Redaction settings’</strong> and then <strong>‘Change default redaction settings’</strong>. Under <strong>‘Change PII identification method’</strong>, open <strong>‘Select entity types to redact’</strong>. The dropdown shown depends on your PII method (Local, AWS Comprehend, or LLM); its label may be <strong>‘Local PII identification model (click empty space in box for full list)’</strong>, <strong>‘AWS Comprehend PII identification model…’</strong>, or similar. Click in the empty box or near the dropdown arrow to see the full list of entity types (e.g.&nbsp;DATE_TIME, NAME, EMAIL). Select the types you want to redact; they appear in the list. Click the <strong>‘x’</strong> next to an item to remove it.</p>
<p>Example: to also redact dates in the example complaint letter, add <strong>‘DATE_TIME’</strong> here, then click <strong>‘Extract text and redact document’</strong>. You should get a redacted version of ‘Example complaint letter’ with dates and times removed. To start with different files or a clean slate, refresh the browser to begin a new session.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/additional_entities/additional_entities_select.PNG" class="img-fluid figure-img"></p>
<figcaption>Redacting additional types of information dropdown</figcaption>
</figure>
</div>
</section>
<section id="redacting-only-specific-pages" class="level3">
<h3 class="anchored" data-anchor-id="redacting-only-specific-pages">Redacting only specific pages</h3>
<p>To redact only a subset of pages (e.g.&nbsp;only page 1), go to the <strong>Settings</strong> tab and open the <strong>‘Redact only selected pages’</strong> accordion. Set <strong>‘Lowest page to redact (set to 0 to redact from the first page)’</strong> and <strong>‘Highest page to redact (set to 0 to redact to the last page)’</strong> (e.g.&nbsp;both 1 for only page 1). The next redaction run will only process that range; output filenames will include a suffix like **’…_1_1.pdf’**.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/allow_list/select_pages.PNG" class="img-fluid figure-img"></p>
<figcaption>Selecting specific pages to redact</figcaption>
</figure>
</div>
</section>
<section id="handwriting-and-signature-redaction" class="level3">
<h3 class="anchored" data-anchor-id="handwriting-and-signature-redaction">Handwriting and signature redaction</h3>
<p>The <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/Partnership-Agreement-Toolkit_0_0.pdf">Partnership Agreement Toolkit</a> is a good example for testing AWS Textract with signatures. On the <strong>‘Redact PDFs/images’</strong> tab, follow the steps below.</p>
<ol type="1">
<li>In <strong>‘Redaction settings’</strong> → <strong>‘Change default redaction settings’</strong>, set the text extraction method to <strong>‘AWS Textract service - all PDF types’</strong>.</li>
<li>An accordion <strong>‘Enable AWS Textract signature detection (default is off)’</strong> will appear. Open it and enable handwriting and/or signatures as needed.</li>
<li>If you only want signatures/handwriting redacted, under <strong>‘Select entity types to redact’</strong> you can clear other entity types (click the <strong>‘x’</strong> next to each) so that only the signature/handwriting options apply.</li>
</ol>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/textract_handwriting_signatures.PNG" class="img-fluid figure-img"></p>
<figcaption>Handwriting and signatures</figcaption>
</figure>
</div>
<p>Run <strong>‘Extract text and redact document’</strong>. Handwriting and signatures (e.g.&nbsp;on pages 5–7) will be redacted and can be reviewed on the <strong>‘Review redactions’</strong> tab.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/refs/heads/main/review_redactions/Signatures%20and%20handwriting%20found.PNG" class="img-fluid figure-img"></p>
<figcaption>Handwriting and signatures redacted example</figcaption>
</figure>
</div>
</section>
</section>
<section id="reviewing-and-modifying-suggested-redactions" class="level2">
<h2 class="anchored" data-anchor-id="reviewing-and-modifying-suggested-redactions">Reviewing and modifying suggested redactions</h2>
<p>Sometimes the app will suggest redactions that are incorrect, or will miss personal information entirely. The app allows you to review and modify suggested redactions to compensate for this. You can do this on the ‘Review redactions’ tab.</p>
<p>We will go through ways to review suggested redactions with an example. On the <strong>‘Redact PDFs/images’</strong> tab, upload the <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/example_of_emails_sent_to_a_professor_before_applying.pdf">‘Example of files sent to a professor before applying.pdf’</a> file. Keep the default ‘Local model - selectable text’ option and click <strong>‘Extract text and redact document’</strong>. Once the outputs are created, go to the <strong>‘Review redactions’</strong> tab.</p>
<p>On the ‘Review redactions’ tab you have a visual interface that allows you to inspect and modify redactions suggested by the app. There are quite a few options to look at, so we’ll go from top to bottom.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/review_redactions.PNG" class="img-fluid figure-img"></p>
<figcaption>Review redactions</figcaption>
</figure>
</div>
<section id="uploading-documents-for-review" class="level3">
<h3 class="anchored" data-anchor-id="uploading-documents-for-review">Uploading documents for review</h3>
<p>The top area has a file upload area where you can upload files for review . In the left box, upload the original PDF file. Click ‘1. Upload original PDF’. In the right box, you can upload the ’…_review_file.csv’ that is produced by the redaction process.</p>
<p>Optionally, you can upload a ’…_ocr_result_with_words’ file here, that will allow you to search through the text and easily <a href="#searching-and-adding-custom-redactions">add new redactions based on word search</a>. You can also upload one of the ’…_ocr_output.csv’ file here that comes out of a redaction task, so that you can navigate the extracted text from the document. Click the button ‘2. Upload Review or OCR csv files’ load in these files.</p>
<p>Now you can review and modify the suggested redactions using the interface described below.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/search_extracted_text.PNG" class="img-fluid figure-img"></p>
<figcaption>Search extracted text</figcaption>
</figure>
</div>
<p>You can upload the three review files in the box (unredacted document, ’…_review_file.csv’ and ’…_ocr_output.csv’ file) before clicking ‘<strong>Review redactions based on original PDF…</strong>’, as in the image below:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/upload_three_files.PNG" class="img-fluid figure-img"></p>
<figcaption>Upload three files for review</figcaption>
</figure>
</div>
<p><strong>NOTE:</strong> ensure you upload the <strong><em>unredacted</em></strong> document here and not the redacted version, otherwise you will be checking over a document that already has redaction boxes applied!</p>
</section>
<section id="page-navigation" class="level3">
<h3 class="anchored" data-anchor-id="page-navigation">Page navigation</h3>
<p>You can change the page viewed either by clicking ‘Previous page’ or ‘Next page’, or by typing a specific page number in the ‘Current page’ box and pressing Enter on your keyboard. Each time you switch page, it will save redactions you have made on the page you are moving from, so you will not lose changes you have made.</p>
<p>You can also navigate to different pages by clicking on rows in the tables under ‘Search suggested redactions’ to the right, or ‘search all extracted text’ (if enabled) beneath that.</p>
</section>
<section id="the-document-viewer-pane" class="level3">
<h3 class="anchored" data-anchor-id="the-document-viewer-pane">The document viewer pane</h3>
<p>On the selected page, each redaction is highlighted with a box next to its suggested redaction label (e.g.&nbsp;person, email).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/document_viewer_pane.PNG" class="img-fluid figure-img"></p>
<figcaption>Document view pane</figcaption>
</figure>
</div>
<p>There are a number of different options to add and modify redaction boxes and page on the document viewer pane. To zoom in and out of the page, use your mouse wheel. To move around the page while zoomed, you need to be in modify mode. Scroll to the bottom of the document viewer to see the relevant controls. You should see a box icon, a hand icon, and two arrows pointing counter-clockwise and clockwise.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/change_review_mode.PNG" class="img-fluid figure-img"></p>
<figcaption>Change redaction mode</figcaption>
</figure>
</div>
<p>Click on the hand icon to go into modify mode. When you click and hold on the document viewer, This will allow you to move around the page when zoomed in. To rotate the page, you can click on either of the round arrow buttons to turn in that direction.</p>
<p><strong>NOTE:</strong> When you switch page, the viewer will stay in your selected orientation, so if it looks strange, just rotate the page again and hopefully it will look correct!</p>
<section id="modify-existing-redactions-hand-icon" class="level4">
<h4 class="anchored" data-anchor-id="modify-existing-redactions-hand-icon">Modify existing redactions (hand icon)</h4>
<p>After clicking on the hand icon, the interface allows you to modify existing redaction boxes. When in this mode, you can click and hold on an existing box to move it.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/modify_existing_redaction_box.PNG" class="img-fluid figure-img"></p>
<figcaption>Modify existing redaction box</figcaption>
</figure>
</div>
<p>Click on one of the small boxes at the edges to change the size of the box. To delete a box, click on it to highlight it, then press delete on your keyboard. Alternatively, double click on a box and click ‘Remove’ on the box that appears.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/existing_redaction_box_remove.PNG" class="img-fluid figure-img"></p>
<figcaption>Remove existing redaction box</figcaption>
</figure>
</div>
</section>
<section id="add-new-redaction-boxes-box-icon" class="level4">
<h4 class="anchored" data-anchor-id="add-new-redaction-boxes-box-icon">Add new redaction boxes (box icon)</h4>
<p>To change to ‘add redaction boxes’ mode, scroll to the bottom of the page. Click on the box icon, and your cursor will change into a crosshair. Now you can add new redaction boxes where you wish. A popup will appear when you create a new box so you can select a label and colour for the new box.</p>
</section>
<section id="locking-in-new-redaction-box-format" class="level4">
<h4 class="anchored" data-anchor-id="locking-in-new-redaction-box-format">‘Locking in’ new redaction box format</h4>
<p>It is possible to lock in a chosen format for new redaction boxes so that you don’t have the popup appearing each time. When you make a new box, select the options for your ‘locked’ format, and then click on the lock icon on the left side of the popup, which should turn blue.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/new_redaction_box_lock_mode.PNG" class="img-fluid figure-img"></p>
<figcaption>Lock redaction box format</figcaption>
</figure>
</div>
<p>You can now add new redaction boxes without a popup appearing. If you want to change or ‘unlock’ the your chosen box format, you can click on the new icon that has appeared at the bottom of the document viewer pane that looks a little like a gift tag. You can then change the defaults, or click on the lock icon again to ‘unlock’ the new box format - then popups will appear again each time you create a new box.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/change_review_mode_with_lock.PNG" class="img-fluid figure-img"></p>
<figcaption>Change or unlock redaction box format</figcaption>
</figure>
</div>
</section>
</section>
<section id="apply-redactions-to-pdf-and-save-changes-on-current-page" class="level3">
<h3 class="anchored" data-anchor-id="apply-redactions-to-pdf-and-save-changes-on-current-page">Apply redactions to PDF and Save changes on current page</h3>
<p>Once you have reviewed all the redactions in your document and you are happy with the outputs, you can click ‘Apply revised redactions to PDF’ to create a new ’_redacted.pdf’ output alongside a new ’_review_file.csv’ output.</p>
<p>If you are working on a page and haven’t saved for a while, you can click ‘Save changes on current page to file’ to ensure that they are saved to an updated ‘review_file.csv’ output.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/review_mod_outputs.PNG" class="img-fluid figure-img"></p>
<figcaption>Review modified outputs</figcaption>
</figure>
</div>
</section>
<section id="selecting-and-removing-redaction-boxes-using-the-search-suggested-redactions-table" class="level3">
<h3 class="anchored" data-anchor-id="selecting-and-removing-redaction-boxes-using-the-search-suggested-redactions-table">Selecting and removing redaction boxes using the ‘Search suggested redactions’ table</h3>
<p>The table shows a list of all the suggested redactions in the document alongside the page, label, and text (if available).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/list_find_labels.PNG" class="img-fluid figure-img"></p>
<figcaption>Search suggested redaction area</figcaption>
</figure>
</div>
<p>If you click on one of the rows in this table, you will be taken to the page of the redaction. Clicking on a redaction row on the same page will change the colour of redaction box to blue to help you locate it in the document viewer (just when using the app, not in redacted output PDFs).</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/review_row_highlight.PNG" class="img-fluid figure-img"></p>
<figcaption>Search suggested redaction area</figcaption>
</figure>
</div>
<p>You can choose a specific entity type to see which pages the entity is present on. If you want to go to the page specified in the table, you can click on a cell in the table and the review page will be changed to that page.</p>
<p>To filter the ‘Search suggested redactions’ table you can: 1. Click on one of the dropdowns (Redaction category, Page, Text), and select an option, or 2. Write text in the ‘Filter’ box just above the table. Click the blue box to apply the filter to the table.</p>
<p>Once you have filtered the table, or selected a row from the table, you have a few options underneath on what you can do with the filtered rows:</p>
<ul>
<li>Click the <strong>Exclude all redactions in table</strong> button to remove all redactions visible in the table from the document. <strong>Important:</strong> ensure that you have clicked the blue tick icon next to the search box before doing this, or you will remove all redactions from the document. If you do end up doing this, click the ‘Undo last element removal’ button below to restore the redactions.</li>
<li>Click the <strong>Exclude specific redaction row</strong> button to remove only the redaction from the last row you clicked on from the document. The currently selected row is visible below.</li>
<li>Click the <strong>Exclude all redactions with the same text as selected row</strong> button to remove all redactions from the document that are exactly the same as the selected row text.</li>
</ul>
<p><strong>NOTE</strong>: After excluding redactions using any of the above options, click the ‘Reset filters’ button below to ensure that the dropdowns and table return to seeing all remaining redactions in the document.</p>
<p>If you made a mistake, click the ‘Undo last element removal’ button to restore the Search suggested redactions table to its previous state (can only undo the last action).</p>
</section>
<section id="searching-and-adding-custom-redactions" class="level3">
<h3 class="anchored" data-anchor-id="searching-and-adding-custom-redactions">Searching and Adding Custom Redactions</h3>
<p>After a document has been processed, you may need to redact specific terms, names, or phrases that the automatic PII (Personally Identifiable Information) detection might have missed. The <strong>“Search text and redact”</strong> tab gives you the power to find and redact any text within your document manually.</p>
<section id="how-to-use-the-search-and-redact-feature" class="level4">
<h4 class="anchored" data-anchor-id="how-to-use-the-search-and-redact-feature">How to Use the Search and Redact Feature</h4>
<p>The workflow is designed to be simple: <strong>Search → Select → Redact</strong>.</p>
<hr>
</section>
<section id="step-1-search-for-text" class="level4">
<h4 class="anchored" data-anchor-id="step-1-search-for-text"><strong>Step 1: Search for Text</strong></h4>
<ol type="1">
<li>Navigate to the <strong>“Search text and redact”</strong> tab.</li>
<li>The main table will initially be populated with all the text extracted from the document for a page, broken down by word.</li>
<li>To narrow this down, use the <strong>“Multi-word text search”</strong> box to type the word or phrase you want to find (this will search the whole document). If you want to do a regex-based search, tick the ‘Enable regex pattern matching’ box under ‘Search options’ below.</li>
<li>Click the <strong>“Search”</strong> button or press Enter.</li>
<li>The table below will update to show only the rows containing text that matches your search query.</li>
</ol>
<blockquote class="blockquote">
<p><strong>Tip:</strong> You can also filter the results by page number using the <strong>“Page”</strong> dropdown. To clear all filters and see the full text again, click the <strong>“Reset table to original state”</strong> button.</p>
</blockquote>
<hr>
</section>
<section id="step-2-select-and-review-a-match" class="level4">
<h4 class="anchored" data-anchor-id="step-2-select-and-review-a-match"><strong>Step 2: Select and Review a Match</strong></h4>
<p>When you click on any row in the search results table:</p>
<ul>
<li>The document preview on the left will automatically jump to that page, allowing you to see the word in its original context.</li>
<li>The details of your selection will appear in the smaller <strong>“Selected row”</strong> table for confirmation.</li>
</ul>
<hr>
</section>
<section id="step-3-choose-your-redaction-method" class="level4">
<h4 class="anchored" data-anchor-id="step-3-choose-your-redaction-method"><strong>Step 3: Choose Your Redaction Method</strong></h4>
<p>You have several powerful options for redacting the text you’ve found:</p>
<ul>
<li><strong>Redact a Single, Specific Instance:</strong>
<ul>
<li>Click on the exact row in the table you want to redact.</li>
<li>Click the <strong><code>Redact specific text row</code></strong> button.</li>
<li>Only that single instance will be redacted.</li>
</ul></li>
<li><strong>Redact All Instances of a Word/Phrase:</strong>
<ul>
<li>Let’s say you want to redact the project name “Project Alpha” everywhere it appears.</li>
<li>Find and select one instance of “Project Alpha” in the table.</li>
<li>Click the <strong><code>Redact all words with same text as selected row</code></strong> button.</li>
<li>The application will find and redact every single occurrence of “Project Alpha” throughout the entire document.</li>
</ul></li>
<li><strong>Redact All Current Search Results:</strong>
<ul>
<li>Perform a search (e.g., for a specific person’s name).</li>
<li>If you are confident that every result shown in the filtered table should be redacted, click the <strong><code>Redact all text in table</code></strong> button.</li>
<li>This will apply a redaction to all currently visible items in the table in one go.</li>
</ul></li>
</ul>
<hr>
</section>
<section id="customising-your-new-redactions" class="level4">
<h4 class="anchored" data-anchor-id="customising-your-new-redactions"><strong>Customising Your New Redactions</strong></h4>
<p>Before you click one of the redact buttons, you can customize the appearance and label of the new redactions under the <strong>“Search options”</strong> accordion:</p>
<ul>
<li><strong>Label for new redactions:</strong> Change the text that appears on the redaction box (default is “Redaction”). You could change this to “CONFIDENTIAL” or “CUSTOM”.</li>
<li><strong>Colour for labels:</strong> Set a custom color for the redaction box by providing an RGB value. The format must be three numbers (0-255) in parentheses, for example:
<ul>
<li><code>(255, 0, 0)</code> for Red</li>
<li><code>(0, 0, 0)</code> for Black</li>
<li><code>(255, 255, 0)</code> for Yellow</li>
</ul></li>
</ul>
</section>
<section id="undoing-a-mistake" class="level4">
<h4 class="anchored" data-anchor-id="undoing-a-mistake"><strong>Undoing a Mistake</strong></h4>
<p>If you make a mistake, you can reverse the last redaction action you performed on this tab.</p>
<ul>
<li>Click the <strong><code>Undo latest redaction</code></strong> button. This will revert the last set of redactions you added (whether it was a single row, all of a certain text, or all search results).</li>
</ul>
<blockquote class="blockquote">
<p><strong>Important:</strong> This undo button only works for the <em>most recent</em> action. It maintains a single backup state, so it cannot undo actions that are two or more steps in the past.</p>
</blockquote>
</section>
</section>
<section id="navigating-through-the-document-using-the-search-all-extracted-text" class="level3">
<h3 class="anchored" data-anchor-id="navigating-through-the-document-using-the-search-all-extracted-text">Navigating through the document using the ‘Search all extracted text’</h3>
<p>The ‘search all extracted text’ table will contain text if you have just redacted a document, or if you have uploaded a ’…_ocr_output.csv’ file alongside a document file and review file on the Review redactions tab as <a href="#uploading-documents-for-review">described above</a>.</p>
<p>You can navigate through the document using this table. When you click on a row, the Document viewer pane to the left will change to the selected page.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/select_extracted_text.PNG" class="img-fluid figure-img"></p>
<figcaption>Search suggested redaction area</figcaption>
</figure>
</div>
<p>You can search through the extracted text by using the search bar just above the table, which should filter as you type. To apply the filter and ‘cut’ the table, click on the blue tick inside the box next to your search term. To return the table to its original content, click the button below the table ‘Reset OCR output table filter’.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/review_redactions/search_extracted_text.PNG" class="img-fluid figure-img"></p>
<figcaption>Search suggested redaction area</figcaption>
</figure>
</div>
</section>
</section>
<section id="redacting-word-tabular-data-files-xlsxcsv-or-copy-and-pasted-text" class="level2">
<h2 class="anchored" data-anchor-id="redacting-word-tabular-data-files-xlsxcsv-or-copy-and-pasted-text">Redacting Word, tabular data files (XLSX/CSV) or copy and pasted text</h2>
<section id="word-or-tabular-data-files-xlsxcsv" class="level3">
<h3 class="anchored" data-anchor-id="word-or-tabular-data-files-xlsxcsv">Word or tabular data files (XLSX/CSV)</h3>
<p>The app can be used to redact Word (.docx), or tabular data files such as xlsx or csv files. For this to work properly, your data file needs to be in a simple table format, with a single table starting from the first cell (A1), and no other information in the sheet. Similarly for .xlsx files, each sheet in the file that you want to redact should be in this simple format.</p>
<p>To demonstrate this, we can use <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/combined_case_notes.csv">the example csv file ‘combined_case_notes.csv’</a>, which is a small dataset of dummy social care case notes. Go to the ‘Open text or Excel/csv files’ tab. Drop the file into the upload area. After the file is loaded, you should see the suggested columns for redaction in the box underneath. You can select and deselect columns to redact as you wish from this list.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/tabular_files/file_upload_csv_columns.PNG" class="img-fluid figure-img"></p>
<figcaption>csv upload</figcaption>
</figure>
</div>
<p>If you were instead to upload an xlsx file, you would see also a list of all the sheets in the xlsx file that can be redacted. The ‘Select columns’ area underneath will suggest a list of all columns in the file across all sheets.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/tabular_files/file_upload_xlsx_columns.PNG" class="img-fluid figure-img"></p>
<figcaption>xlsx upload</figcaption>
</figure>
</div>
<p>Once you have chosen your input file and sheets/columns to redact, you can choose the redaction method. ‘Local’ will use the same local model as used for documents on the <strong>‘Redact PDFs/images’</strong> tab. ‘AWS Comprehend’ will give better results, at a slight cost.</p>
<p>When you click Redact text/data files, you will see the progress of the redaction task by file and sheet, and you will receive a csv output with the redacted data.</p>
</section>
<section id="choosing-output-anonymisation-format" class="level3">
<h3 class="anchored" data-anchor-id="choosing-output-anonymisation-format">Choosing output anonymisation format</h3>
<p>You can also choose the anonymisation format of your output results. Open the tab ‘Anonymisation output format’ to see the options. By default, any detected PII will be replaced with the word ‘REDACTED’ in the cell. You can choose one of the following options as the form of replacement for the redacted text: - replace with ‘REDACTED’: Replaced by the word ‘REDACTED’ (default) - replace with <entity_name>: Replaced by e.g.&nbsp;‘PERSON’ for people, ‘EMAIL_ADDRESS’ for emails etc. - redact completely: Text is removed completely and replaced by nothing. - hash: Replaced by a unique long ID code that is consistent with entity text. I.e. a particular name will always have the same ID code. - mask: Replace with stars ’*’.</entity_name></p>
</section>
<section id="redacting-copy-and-pasted-text" class="level3">
<h3 class="anchored" data-anchor-id="redacting-copy-and-pasted-text">Redacting copy and pasted text</h3>
<p>You can also write open text into an input box and redact that using the same methods as described above. To do this, write or paste text into the ‘Enter open text’ box that appears when you open the ‘Redact open text’ tab. Then select a redaction method, and an anonymisation output format as described above. The redacted text will be printed in the output textbox, and will also be saved to a simple csv file in the output file box.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/tabular_files/text_anonymisation_outputs.PNG" class="img-fluid figure-img"></p>
<figcaption>Text analysis output</figcaption>
</figure>
</div>
</section>
<section id="redaction-log-outputs" class="level3">
<h3 class="anchored" data-anchor-id="redaction-log-outputs">Redaction log outputs</h3>
<p>A list of the suggested redaction outputs from the tabular data / open text data redaction is available on the <strong>Settings</strong> tab under <strong>‘Log file outputs’</strong>.</p>
</section>
</section>
<section id="identifying-and-redacting-duplicate-pages" class="level2">
<h2 class="anchored" data-anchor-id="identifying-and-redacting-duplicate-pages">Identifying and redacting duplicate pages</h2>
<p>The files for this section are stored <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/duplicate_page_find_in_app/">here</a>.</p>
<p>Some redaction tasks involve removing duplicate pages of text that may exist across multiple documents. This feature helps you find and remove duplicate content that may exist in single or multiple documents. It can identify everything from single identical pages to multi-page sections (subdocuments). The process involves three main steps: configuring the analysis, reviewing the results in the interactive interface, and then using the generated files to perform the redactions.</p>
<section id="duplicate-page-detection-in-documents" class="level3">
<h3 class="anchored" data-anchor-id="duplicate-page-detection-in-documents">Duplicate page detection in documents</h3>
<p>This section covers finding duplicate pages across PDF documents using OCR output files.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/duplicate_page_find_in_app/img/duplicate_page_input_interface_new.PNG" class="img-fluid figure-img"></p>
<figcaption>Example duplicate page inputs</figcaption>
</figure>
</div>
<p><strong>Step 1: Upload and Configure the Analysis</strong> First, navigate to the <strong>‘Identify duplicate pages’</strong> tab. In <strong>‘Step 1: Configure and run analysis’</strong>, upload all the ocr_output.csv files you wish to compare. These files are generated every time you run a redaction task and contain the text for each page of a document.</p>
<p>For our example, you can upload the four ‘ocr_output.csv’ files provided in the example folder. Open the <strong>‘Duplicate matching parameters’</strong> accordion to set:</p>
<ul>
<li><strong>Similarity threshold:</strong> A score from 0 to 1. Pages or sequences with text similarity above this value are considered a match (default 0.95).</li>
<li><strong>Minimum word count:</strong> Pages or lines with fewer words than this are ignored (default 10).</li>
<li><strong>Duplicate matching mode:</strong> <strong>‘Find duplicates by page’</strong> compares full-page text; <strong>‘Find duplicates by text line’</strong> compares individual lines.</li>
</ul>
<p><strong>Matching strategy</strong> (below the parameters): - <strong>‘Combine consecutive matches into a single match (subdocument match)’</strong> (default: checked): Finds the longest possible sequence of matching pages (subdocuments). Uncheck to use the next option. - <strong>Minimum consecutive matches</strong> (slider, shown when subdocument matching is unchecked): Only report sequences of at least this many consecutive matches (e.g.&nbsp;3 for at least 3-page runs). Set to 1 for single-page matching.</p>
<p>Once your parameters are set, click <strong>‘Identify duplicate pages/subdocuments’</strong>.</p>
<p>In case you want to see the original PDFs for the example, they are available <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/duplicate_page_find_in_app/input_pdfs/">here</a>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/duplicate_page_find_in_app/img/duplicate_matching_parameters.PNG" class="img-fluid figure-img"></p>
<figcaption>Duplicate matching parameters</figcaption>
</figure>
</div>
<p><strong>Step 2: Review Results in the Interface</strong> After the analysis is complete, the results will be displayed directly in the interface.</p>
<p><em>Analysis Summary:</em> A table will appear showing a summary of all the matches found. The columns will change depending on the matching strategy you chose. For subdocument matches, it will show the start and end pages of the matched sequence.</p>
<p><em>Interactive Preview:</em> This is the most important part of the review process. Click on any row in the summary table. The full text of the matching page(s) will appear side-by-side in the “Full Text Preview” section below, allowing you to instantly verify the accuracy of the match.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/duplicate_page_find_in_app/img/duplicate_page_output_review_overview.PNG" class="img-fluid figure-img"></p>
<figcaption>Duplicate review interface</figcaption>
</figure>
</div>
<p><strong>Step 3: Download and Use the Output Files</strong> The analysis also generates a set of downloadable files for your records and for performing redactions.</p>
<ul>
<li>page_similarity_results.csv: This is a detailed report of the analysis you just ran. It shows a breakdown of the pages from each file that are most similar to each other above the similarity threshold. You can compare the text in the two columns ‘Page_1_Text’ and ‘Page_2_Text’. For single-page matches, it will list each pair of matching pages. For subdocument matches, it will list the start and end pages of each matched sequence, along with the total length of the match.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/duplicate_page_find_in_app/img/page_similarity_example.PNG" class="img-fluid figure-img"></p>
<figcaption>Page similarity file example</figcaption>
</figure>
</div>
<ul>
<li>[Original_Filename]_pages_to_redact.csv: For each input document that was found to contain duplicate content, a separate redaction list is created. This is a simple, one-column CSV file containing a list of all page numbers that should be removed. To use these files, you can either upload the original document (i.e.&nbsp;the PDF) on the ‘Review redactions’ tab, and then click on the ‘Apply relevant duplicate page output to document currently under review’ button. You should see the whole pages suggested for redaction on the ‘Review redactions’ tab. Alternatively, you can reupload the file into the whole page redaction section as described in the <a href="#full-page-redaction-list-example">‘Full page redaction list example’ section</a>.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/duplicate_page_find_in_app/img/duplicate_page_output_interface_new.PNG" class="img-fluid figure-img"></p>
<figcaption>Example duplicate page redaction list</figcaption>
</figure>
</div>
<p>If you want to combine the results from this redaction process with previous redaction tasks for the same PDF, you could merge review file outputs following the steps described in <a href="#merging-existing-redaction-review-files">Merging existing redaction review files</a> above.</p>
<p><strong>Redact duplicate pages on the Redact PDFs/images tab</strong></p>
<p>On the <strong>‘Redact PDFs/images’</strong> tab, in the <strong>‘Redaction settings’</strong> area (accordion <strong>‘Terms to always include or exclude in redactions, and whole page redaction’</strong>), there is a <strong>‘Redact duplicate pages’</strong> checkbox. When this is enabled, the app will identify duplicate pages and apply whole-page redaction to them as part of the same redaction run. This option is shown when PII identification options are enabled. You can use it instead of (or in addition to) running duplicate detection on the <strong>‘Identify duplicate pages’</strong> tab and then applying the output to a document on <strong>‘Review redactions’</strong>.</p>
</section>
<section id="duplicate-detection-in-tabular-data" class="level3">
<h3 class="anchored" data-anchor-id="duplicate-detection-in-tabular-data">Duplicate detection in tabular data</h3>
<p>The app also includes functionality to find duplicate cells or rows in CSV, Excel, or Parquet files. This is particularly useful for cleaning datasets where you need to identify and remove duplicate entries.</p>
<p><strong>Step 1: Upload files and configure analysis</strong></p>
<p>Navigate to the ‘Word or Excel/csv files’ tab and scroll down to the “Find duplicate cells in tabular data” section. Upload your tabular files (CSV, Excel, or Parquet) and configure the analysis parameters:</p>
<ul>
<li><strong>Similarity threshold</strong>: Score (0-1) to consider cells a match. 1 = perfect match</li>
<li><strong>Minimum word count</strong>: Cells with fewer words than this value are ignored</li>
<li><strong>Do initial clean of text</strong>: Remove URLs, HTML tags, and non-ASCII characters</li>
<li><strong>Remove duplicate rows</strong>: Automatically remove duplicate rows from deduplicated files</li>
<li><strong>Select Excel sheet names</strong>: Choose which sheets to analyze (for Excel files)</li>
<li><strong>Select text columns</strong>: Choose which columns contain text to analyze</li>
</ul>
<p><strong>Step 2: Review results</strong></p>
<p>After clicking “Find duplicate cells/rows”, the results will be displayed in a table showing: - File1, Row1, File2, Row2 - Similarity_Score - Text1, Text2 (the actual text content being compared)</p>
<p>Click on any row to see more details about the duplicate match in the preview boxes below.</p>
<p><strong>Step 3: Remove duplicates</strong></p>
<p>Select a file from the dropdown and click “Remove duplicate rows from selected file” to create a cleaned version with duplicates removed. The cleaned file will be available for download.</p>
</section>
</section>
<section id="advanced-user-guide-1" class="level1">
<h1>Advanced user guide</h1>
<p>This advanced user guide covers features that require system administration access or command-line usage. These features are typically used by system administrators or advanced users who need more control over the redaction process.</p>
<section id="fuzzy-search-and-redaction" class="level2">
<h2 class="anchored" data-anchor-id="fuzzy-search-and-redaction">Fuzzy search and redaction</h2>
<p>The files for this section are stored <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/fuzzy_search/">here</a>.</p>
<p>Sometimes you may be searching for terms that are slightly mispelled throughout a document, for example names. The document redaction app gives the option for searching for long phrases that may contain spelling mistakes, a method called ‘fuzzy matching’.</p>
<p>To do this, go to the <strong>‘Redact PDFs/images’</strong> tab and open the <strong>‘Redaction settings’</strong> area. In the section <strong>‘Terms to always include or exclude in redactions, and whole page redaction’</strong>, first ensure your chosen PII method (Local or AWS Comprehend) is selected, then in the entity list for that method select <strong>‘CUSTOM_FUZZY’</strong>. In the same section you will see <strong>‘Maximum spelling mistakes for matching deny list terms’</strong> (0–9): type a number or use the arrows (e.g.&nbsp;set to 3) to allow up to that many changes in text for a match.</p>
<p>If shown in your deployment, the option to match on entire phrases in the deny list (as opposed to each word individually) can be left as is.</p>
<p>To load a deny list from a file for the fuzzy search, use the <strong>Settings</strong> tab under <strong>‘Redaction settings’</strong> and the <strong>‘Import allow list file’</strong> / <strong>‘Import custom deny list’</strong> / <strong>‘Import fully redacted pages list’</strong> area, or add terms directly in the deny list box on the <strong>‘Redact PDFs/images’</strong> tab. A relevant deny list file can be found <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/fuzzy_search/Partnership-Agreement-Toolkit_test_deny_list_para_single_spell.csv">here</a> — you can upload it following <a href="#deny-list-example">these steps</a>. You will notice that the suggested deny list has spelling mistakes compared to phrases found in the example document.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/fuzzy_search/img/fuzzy_deny_list_example.PNG" class="img-fluid figure-img"></p>
<figcaption>Deny list example with spelling mistakes</figcaption>
</figure>
</div>
<p>Upload the <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/Partnership-Agreement-Toolkit_0_0.pdf">Partnership-Agreement-Toolkit file</a> on the <strong>‘Redact PDFs/images’</strong> tab (in the <strong>‘Redaction settings’</strong> area). Then click <strong>‘Extract text and redact document’</strong>.</p>
<p>Using these deny list with spelling mistakes, the app fuzzy match these terms to the correct text in the document. After redaction is complete, go to the <strong>‘Review redactions’</strong> tab to check the outputs. You should see that the phrases in the deny list have been successfully matched.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/fuzzy_search/img/fuzzy_search_review.PNG" class="img-fluid figure-img"></p>
<figcaption>Fuzzy match review outputs</figcaption>
</figure>
</div>
</section>
<section id="export-to-and-import-from-adobe" class="level2">
<h2 class="anchored" data-anchor-id="export-to-and-import-from-adobe">Export to and import from Adobe</h2>
<p>Files for this section are stored <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/export_to_adobe/">here</a>.</p>
<p>The Document Redaction app has enhanced features for working with Adobe Acrobat. You can now export suggested redactions to Adobe, import Adobe comment files into the app, and use the new <code>_for_review.pdf</code> files directly in Adobe Acrobat.</p>
<section id="using-_for_review.pdf-files-with-adobe-acrobat" class="level3">
<h3 class="anchored" data-anchor-id="using-_for_review.pdf-files-with-adobe-acrobat">Using _for_review.pdf files with Adobe Acrobat</h3>
<p>The app now generates <code>...redactions_for_review.pdf</code> files that contain the original PDF with redaction boxes overlaid but the original text still visible underneath. These files are specifically designed for use in Adobe Acrobat and other PDF viewers where you can:</p>
<ul>
<li>See the suggested redactions without the text being permanently removed</li>
<li>Review redactions before finalising them</li>
<li>Use Adobe Acrobat’s built-in redaction tools to modify or apply the redactions</li>
<li>Export the final redacted version directly from Adobe</li>
</ul>
<p>Simply open the <code>...redactions_for_review.pdf</code> file in Adobe Acrobat to begin reviewing and modifying the suggested redactions.</p>
</section>
<section id="exporting-to-adobe-acrobat" class="level3">
<h3 class="anchored" data-anchor-id="exporting-to-adobe-acrobat">Exporting to Adobe Acrobat</h3>
<p>To convert suggested redactions to Adobe format, you need to have the original PDF and a review file csv in the input box at the top of the Review redactions page.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/export_to_adobe/img/adobe_export_input_area.PNG" class="img-fluid figure-img"></p>
<figcaption>Input area for files for Adobe export</figcaption>
</figure>
</div>
<p>Then, you can find the export to Adobe option at the bottom of the Review redactions tab. Adobe comment files will be output here.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/export_to_adobe/img/export_to_adobe_interface.PNG" class="img-fluid figure-img"></p>
<figcaption>Adobe export/import options</figcaption>
</figure>
</div>
<p>Once the input files are ready, you can click on the ‘Convert review file to Adobe comment format’. You should see a file appear in the output box with a ‘.xfdf’ file type. To use this in Adobe, after download to your computer, you should be able to double click on it, and a pop-up box will appear asking you to find the PDF file associated with it. Find the original PDF file used for your redaction task. The file should be opened up in Adobe Acrobat with the suggested redactions.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/export_to_adobe/img/adobe_redact_example.PNG" class="img-fluid figure-img"></p>
<figcaption>Suggested redactions in Adobe Acrobat</figcaption>
</figure>
</div>
</section>
<section id="importing-from-adobe-acrobat" class="level3">
<h3 class="anchored" data-anchor-id="importing-from-adobe-acrobat">Importing from Adobe Acrobat</h3>
<p>The app also allows you to import .xfdf files from Adobe Acrobat. To do this, go to the same Adobe import/export area as described above at the bottom of the Review Redactions tab. In this box, you need to upload a .xfdf Adobe comment file, along with the relevant original PDF for redaction.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/export_to_adobe/img/import_from_adobe_interface.PNG" class="img-fluid figure-img"></p>
<figcaption>Adobe import interface</figcaption>
</figure>
</div>
<p>When you click the ‘convert .xfdf comment file to review_file.csv’ button, the app should take you up to the top of the screen where the new review file has been created and can be downloaded.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/export_to_adobe/img/import_from_adobe_interface_outputs.PNG" class="img-fluid figure-img"></p>
<figcaption>Outputs from Adobe import</figcaption>
</figure>
</div>
</section>
</section>
<section id="using-the-aws-textract-document-api" class="level2">
<h2 class="anchored" data-anchor-id="using-the-aws-textract-document-api">Using the AWS Textract document API</h2>
<p>This option can be enabled by your system admin, in the config file (‘SHOW_WHOLE_DOCUMENT_TEXTRACT_CALL_OPTIONS’ environment variable, and subsequent variables). Using this, you will have the option to submit whole documents in quick succession to the AWS Textract service to get extracted text outputs quickly (faster than using the <strong>‘Extract text and redact document’</strong> process described here).</p>
<section id="starting-a-new-textract-api-job" class="level3">
<h3 class="anchored" data-anchor-id="starting-a-new-textract-api-job">Starting a new Textract API job</h3>
<p>To use this feature, first upload a document file <a href="#upload-files-to-the-app">in the usual way</a> on the <strong>‘Redact PDFs/images’</strong> tab. Under <strong>‘Enable AWS Textract signature detection’</strong> (inside <strong>‘Change default redaction settings’</strong>) you can choose whether to analyse signatures or not (with a <a href="#enable-aws-textract-signature-extraction">cost implication</a>).</p>
<p>Then, open the section under the heading ‘Submit whole document to AWS Textract API…’.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/quick_start/textract_document_api.PNG" class="img-fluid figure-img"></p>
<figcaption>Textract document API menu</figcaption>
</figure>
</div>
<p>Click ‘Analyse document with AWS Textract API call’. After a few seconds, the job should be submitted to the AWS Textract service. The box ‘Job ID to check status’ should now have an ID filled in. If it is not already filled with previous jobs (up to seven days old), the table should have a row added with details of the new API job.</p>
<p>Click the button underneath, ‘Check status of Textract job and download’, to see progress on the job. Processing will continue in the background until the job is ready, so it is worth periodically clicking this button to see if the outputs are ready. In testing, and as a rough estimate, it seems like this process takes about five seconds per page. However, this has not been tested with very large documents. Once ready, the ’_textract.json’ output should appear below.</p>
</section>
<section id="textract-api-job-outputs" class="level3">
<h3 class="anchored" data-anchor-id="textract-api-job-outputs">Textract API job outputs</h3>
<p>The ’_textract.json’ output can be used to speed up further redaction tasks as <a href="#optional---costs-and-time-estimation">described previously</a>, the ‘Existing Textract output file found’ flag should now be ticked.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/textract_api/textract_api_initial_outputs.PNG" class="img-fluid figure-img"></p>
<figcaption>Textract document API initial ouputs</figcaption>
</figure>
</div>
<p>You can now easily get the ’…_ocr_output.csv’ redaction output based on this ’_textract.json’ (described in <a href="#redaction-outputs">Redaction outputs</a>) by clicking on the button ‘Convert Textract job outputs to OCR results’. You can now use this file e.g.&nbsp;for <a href="#identifying-and-redacting-duplicate-pages">identifying duplicate pages</a>, or for redaction review.</p>
</section>
</section>
<section id="modifying-existing-redaction-review-files" class="level2">
<h2 class="anchored" data-anchor-id="modifying-existing-redaction-review-files">Modifying existing redaction review files</h2>
<p>You can find the folder containing the files discussed in this section <a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/merge_review_files/">here</a>.</p>
<p>As well as serving as inputs to the document redaction app’s review function, the ‘review_file.csv’ output can be modified insider or outside of the app. This gives you the flexibility to change redaction details outside of the app.</p>
<section id="inside-the-app" class="level3">
<h3 class="anchored" data-anchor-id="inside-the-app">Inside the app</h3>
<p>You can now modify redaction review files directly in the app on the ‘Review redactions’ tab. Open the accordion ‘View and edit review data’ under the file input area. You can edit review file data cells here - press Enter to apply changes. You should see the effect on the current page if you click the ‘Save changes on current page to file’ button to the right.</p>
</section>
<section id="outside-the-app" class="level3">
<h3 class="anchored" data-anchor-id="outside-the-app">Outside the app</h3>
<p>If you open up a ‘review_file’ csv output using a spreadsheet software program such as Microsoft Excel you can easily modify redaction properties. Open the file ‘<a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/merge_review_files/Partnership-Agreement-Toolkit_0_0.pdf_review_file_local.csv">Partnership-Agreement-Toolkit_0_0_redacted.pdf_review_file_local.csv</a>’, and you should see a spreadshet with just four suggested redactions (see below). The following instructions are for using Excel.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/merge_review_files/img/review_file_before.PNG" class="img-fluid figure-img"></p>
<figcaption>Review file before</figcaption>
</figure>
</div>
<p>The first thing we can do is remove the first row - ‘et’ is suggested as a person, but is obviously not a genuine instance of personal information. Right click on the row number and select delete on this menu. Next, let’s imagine that what the app identified as a ‘phone number’ was in fact another type of number and so we wanted to change the label. Simply click on the relevant label cells, let’s change it to ‘SECURITY_NUMBER’. You could also use ‘Find &amp; Select’ -&gt; ‘Replace’ from the top ribbon menu if you wanted to change a number of labels simultaneously.</p>
<p>How about we wanted to change the colour of the ‘email address’ entry on the redaction review tab of the redaction app? The colours in a review file are based on an RGB scale with three numbers ranging from 0-255. <a href="https://rgbcolorpicker.com">You can find suitable colours here</a>. Using this scale, if I wanted my review box to be pure blue, I can change the cell value to (0,0,255).</p>
<p>Imagine that a redaction box was slightly too small, and I didn’t want to use the in-app options to change the size. In the review file csv, we can modify e.g.&nbsp;the ymin and ymax values for any box to increase the extent of the redaction box. For the ‘email address’ entry, let’s decrease ymin by 5, and increase ymax by 5.</p>
<p>I have saved an output file following the above steps as ‘<a href="https://github.com/seanpedrick-case/document_redaction_examples/blob/main/merge_review_files/outputs/Partnership-Agreement-Toolkit_0_0.pdf_review_file_local_mod.csv">Partnership-Agreement-Toolkit_0_0_redacted.pdf_review_file_local_mod.csv</a>’ in the same folder that the original was found. Let’s upload this file to the app along with the original pdf to see how the redactions look now.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/merge_review_files/img/partnership_redactions_after.PNG" class="img-fluid figure-img"></p>
<figcaption>Review file after modification</figcaption>
</figure>
</div>
<p>We can see from the above that we have successfully removed a redaction box, changed labels, colours, and redaction box sizes.</p>
</section>
</section>
<section id="merging-redaction-review-files" class="level2">
<h2 class="anchored" data-anchor-id="merging-redaction-review-files">Merging redaction review files</h2>
<p>Say you have run multiple redaction tasks on the same document, and you want to merge all of these redactions together. You could do this in your spreadsheet editor, but this could be fiddly especially if dealing with multiple review files or large numbers of redactions. The app has a feature to combine multiple review files together to create a ‘merged’ review file.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/merge_review_files/img/merge_review_files_interface.PNG" class="img-fluid figure-img"></p>
<figcaption>Merging review files in the user interface</figcaption>
</figure>
</div>
<p>You can find this option at the bottom of the ‘Redaction Settings’ tab. Upload multiple review files here to get a single output ‘merged’ review_file. In the examples file, merging the ‘review_file_custom.csv’ and ‘review_file_local.csv’ files give you an output containing redaction boxes from both. This combined review file can then be uploaded into the review tab following the usual procedure.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="https://raw.githubusercontent.com/seanpedrick-case/document_redaction_examples/main/merge_review_files/img/merged_review_file_outputs_csv.PNG" class="img-fluid figure-img"></p>
<figcaption>Merging review files outputs in spreadsheet</figcaption>
</figure>
</div>
</section>
</section>
<section id="features-for-expert-userssystem-administrators-1" class="level1">
<h1>Features for expert users/system administrators</h1>
<p>This advanced user guide covers features that require system administration access or command-line usage. These options are not enabled by default but can be configured by your system administrator, and are not available to users who are just using the graphical user interface. These features are typically used by system administrators or advanced users who need more control over the redaction process.</p>
<section id="using-aws-textract-and-comprehend-when-not-running-in-an-aws-environment" class="level2">
<h2 class="anchored" data-anchor-id="using-aws-textract-and-comprehend-when-not-running-in-an-aws-environment">Using AWS Textract and Comprehend when not running in an AWS environment</h2>
<p>AWS Textract and Comprehend give much better results for text extraction and document redaction than the local model options in the app. The most secure way to access them in the Redaction app is to run the app in a secure AWS environment with relevant permissions. Alternatively, you could run the app on your own system while logged in to AWS SSO with relevant permissions.</p>
<p>However, it is possible to access these services directly via API from outside an AWS environment by creating IAM users and access keys with relevant permissions to access AWS Textract and Comprehend services. Please check with your IT and data security teams that this approach is acceptable for your data before trying the following approaches.</p>
<p>To do the following, in your AWS environment you will need to create a new user with permissions for “textract:AnalyzeDocument”, “textract:DetectDocumentText”, and “comprehend:DetectPiiEntities”. Under security credentials, create new access keys - note down the access key and secret key.</p>
<section id="direct-access-by-passing-aws-access-keys-through-app" class="level3">
<h3 class="anchored" data-anchor-id="direct-access-by-passing-aws-access-keys-through-app">Direct access by passing AWS access keys through app</h3>
<p>The Redaction Settings tab now has boxes for entering the AWS access key and secret key. If you paste the relevant keys into these boxes before performing redaction, you should be able to use these services in the app.</p>
</section>
<section id="picking-up-aws-access-keys-through-an-.env-file" class="level3">
<h3 class="anchored" data-anchor-id="picking-up-aws-access-keys-through-an-.env-file">Picking up AWS access keys through an .env file</h3>
<p>The app also has the capability of picking up AWS access key details through a .env file located in a ‘/config/aws_config.env’ file (default), or alternative .env file location specified by the environment variable AWS_CONFIG_PATH. The env file should look like the following with just two lines:</p>
<p>AWS_ACCESS_KEY= your-access-key AWS_SECRET_KEY= your-secret-key</p>
<p>The app should then pick up these keys when trying to access the AWS Textract and Comprehend services during redaction.</p>
</section>
</section>
<section id="advanced-ocr-options" class="level2">
<h2 class="anchored" data-anchor-id="advanced-ocr-options">Advanced OCR options</h2>
<p>The app supports advanced OCR options that combine multiple OCR engines for improved accuracy. These options are not enabled by default but can be configured by changing the app_config.env file in your ‘/config’ folder, or system environment variables in your system.</p>
<section id="available-ocr-models" class="level3">
<h3 class="anchored" data-anchor-id="available-ocr-models">Available OCR models</h3>
<ul>
<li><strong>Tesseract</strong> (default): The standard OCR engine that works well for most documents. Provides good word-level bounding box accuracy.</li>
<li><strong>PaddleOCR</strong>: More accurate for whole line text extraction, but word-level bounding boxes may be less precise. Best for documents with clear, well-formatted text.</li>
<li><strong>Hybrid-paddle</strong>: Combines Tesseract and PaddleOCR - uses Tesseract for initial extraction, then PaddleOCR for re-extraction of low-confidence text regions.</li>
<li><strong>Hybrid-vlm</strong>: Combines Tesseract with Vision Language Models (VLM) - uses Tesseract for initial extraction, then a VLM model (default: Dots.OCR) for re-extraction of low-confidence text.</li>
<li><strong>Hybrid-paddle-vlm</strong>: Combines PaddleOCR with Vision Language Models - uses PaddleOCR first, then a VLM model for low-confidence regions.</li>
<li><strong>AWS Bedrock VLM</strong>: Cloud-based Vision Language Model OCR via AWS Bedrock. Extracts text (and optionally detects people and signatures) from PDFs and images without running models locally. Requires AWS credentials and is subject to Bedrock quotas and pricing.</li>
</ul>
</section>
<section id="enabling-advanced-ocr-options" class="level3">
<h3 class="anchored" data-anchor-id="enabling-advanced-ocr-options">Enabling advanced OCR options</h3>
<p>To enable these options, you need to modify the app_config.env file in your ‘/config’ folder and set the following environment variables:</p>
<p><strong>Basic OCR model selection:</strong></p>
<pre><code>SHOW_LOCAL_OCR_MODEL_OPTIONS = "True"</code></pre>
<p><strong>To enable PaddleOCR options (paddle, hybrid-paddle):</strong></p>
<pre><code>SHOW_PADDLE_MODEL_OPTIONS = "True"</code></pre>
<p><strong>To enable Vision Language Model options (hybrid-vlm, hybrid-paddle-vlm):</strong></p>
<pre><code>SHOW_VLM_MODEL_OPTIONS = "True"</code></pre>
<p><strong>To enable AWS Bedrock VLM OCR (cloud-based VLM text extraction):</strong></p>
<pre><code>SHOW_BEDROCK_VLM_MODELS = "True"</code></pre>
<p>Once enabled, users will see a “Change default local OCR model” (or text extraction method) section in the redaction settings where they can choose between the available models based on what has been enabled, including Bedrock VLM analysis when configured.</p>
</section>
<section id="ocr-configuration-parameters" class="level3">
<h3 class="anchored" data-anchor-id="ocr-configuration-parameters">OCR configuration parameters</h3>
<p>The following parameters can be configured by your system administrator to fine-tune OCR behavior:</p>
<section id="hybrid-ocr-settings" class="level4">
<h4 class="anchored" data-anchor-id="hybrid-ocr-settings">Hybrid OCR settings</h4>
<ul>
<li><strong>SHOW_HYBRID_MODELS</strong> (default: False): If enabled, hybrid OCR options will be shown in the UI.</li>
<li><strong>HYBRID_OCR_CONFIDENCE_THRESHOLD</strong> (default: 80): Tesseract confidence score below which the secondary OCR engine (PaddleOCR or VLM) will be used for re-extraction. Lower values mean more text will be re-extracted.</li>
<li><strong>HYBRID_OCR_PADDING</strong> (default: 1): Padding (in pixels) added to word bounding boxes before re-extraction with the secondary engine.</li>
<li><strong>SAVE_EXAMPLE_HYBRID_IMAGES</strong> (default: False): If enabled, saves comparison images showing Tesseract vs.&nbsp;secondary engine results when using hybrid modes.</li>
<li><strong>SAVE_PAGE_OCR_VISUALISATIONS</strong> (default: False): If enabled, saves images with detected bounding boxes overlaid for debugging purposes.</li>
</ul>
</section>
<section id="tesseract-settings" class="level4">
<h4 class="anchored" data-anchor-id="tesseract-settings">Tesseract settings</h4>
<ul>
<li><strong>TESSERACT_SEGMENTATION_LEVEL</strong> (default: 11): Tesseract PSM (Page Segmentation Mode) level. Valid values are 0-13. Higher values provide more detailed segmentation but may be slower.</li>
</ul>
</section>
<section id="paddleocr-settings" class="level4">
<h4 class="anchored" data-anchor-id="paddleocr-settings">PaddleOCR settings</h4>
<ul>
<li><strong>SHOW_PADDLE_MODEL_OPTIONS</strong> (default: False): If enabled, PaddleOCR options will be shown in the UI.</li>
<li><strong>PADDLE_USE_TEXTLINE_ORIENTATION</strong> (default: False): If enabled, PaddleOCR will detect and correct text line orientation.</li>
<li><strong>PADDLE_DET_DB_UNCLIP_RATIO</strong> (default: 1.2): Controls the expansion ratio of detected text regions. Higher values expand the detection area more.</li>
<li><strong>CONVERT_LINE_TO_WORD_LEVEL</strong> (default: False): If enabled, converts PaddleOCR line-level results to word-level for better precision in bounding boxes (not perfect, but pretty good).</li>
<li><strong>LOAD_PADDLE_AT_STARTUP</strong> (default: False): If enabled, loads the PaddleOCR model when the application starts, reducing latency for first use but increasing startup time.</li>
</ul>
</section>
<section id="image-preprocessing" class="level4">
<h4 class="anchored" data-anchor-id="image-preprocessing">Image preprocessing</h4>
<ul>
<li><strong>PREPROCESS_LOCAL_OCR_IMAGES</strong> (default: True): If enabled, images are preprocessed before OCR. This can improve accuracy but may slow down processing.</li>
<li><strong>SAVE_PREPROCESS_IMAGES</strong> (default: False): If enabled, saves the preprocessed images for debugging purposes.</li>
</ul>
</section>
<section id="vision-language-model-vlm-settings" class="level4">
<h4 class="anchored" data-anchor-id="vision-language-model-vlm-settings">Vision Language Model (VLM) settings</h4>
<p>When VLM options are enabled, the following settings are available:</p>
<ul>
<li><strong>SHOW_VLM_MODEL_OPTIONS</strong> (default: False): If enabled, VLM options will be shown in the UI.</li>
<li><strong>SELECTED_LOCAL_TRANSFORMERS_VLM_MODEL</strong> (default: “Dots.OCR”): The VLM model to use. Options include: “Nanonets-OCR2-3B”, “Dots.OCR”, “Qwen3-VL-2B-Instruct”, “Qwen3-VL-4B-Instruct”, “Qwen3-VL-8B-Instruct”, “PaddleOCR-VL”. Generally, the Qwen3-VL-8B-Instruct model is the most accurate, and vlm/inference server inference is based on using this model, but is also the slowest. Qwen3-VL-4B-Instruct can also work quite well on easier documents.</li>
<li><strong>MAX_SPACES_GPU_RUN_TIME</strong> (default: 60): Maximum seconds to run GPU operations on Hugging Face Spaces.</li>
<li><strong>MAX_NEW_TOKENS</strong> (default: 30): Maximum number of tokens to generate for VLM responses.</li>
<li><strong>MAX_INPUT_TOKEN_LENGTH</strong> (default: 4096): Maximum number of tokens that can be input to the VLM.</li>
<li><strong>VLM_MAX_IMAGE_SIZE</strong> (default: 1000000): Maximum total pixels (width × height) for images. Larger images are resized while maintaining aspect ratio.</li>
<li><strong>VLM_MAX_DPI</strong> (default: 300.0): Maximum DPI for images. Higher DPI images are resized accordingly.</li>
<li><strong>USE_FLASH_ATTENTION</strong> (default: False): If enabled, uses flash attention for improved VLM performance.</li>
<li><strong>SAVE_VLM_INPUT_IMAGES</strong> (default: False): If enabled, saves input images sent to VLM for debugging.</li>
</ul>
</section>
<section id="general-settings" class="level4">
<h4 class="anchored" data-anchor-id="general-settings">General settings</h4>
<ul>
<li><strong>MODEL_CACHE_PATH</strong> (default: “./model_cache”): Directory where OCR models are cached.</li>
<li><strong>OVERWRITE_EXISTING_OCR_RESULTS</strong> (default: False): If enabled, always creates new OCR results instead of loading from existing JSON files.</li>
</ul>
</section>
</section>
<section id="using-an-alternative-ocr-model" class="level3">
<h3 class="anchored" data-anchor-id="using-an-alternative-ocr-model">Using an alternative OCR model</h3>
<p>If the SHOW_LOCAL_OCR_MODEL_OPTIONS, SHOW_PADDLE_MODEL_OPTIONS, and SHOW_INFERENCE_SERVER_VLM_OPTIONS are set to ‘True’ in your app_config.env file, you should see the following options available under <strong>‘Change default redaction settings’</strong> on the <strong>‘Redact PDFs/images’</strong> tab. The different OCR options can be used in different contexts.</p>
<ul>
<li><strong>Tesseract (option ‘tesseract’)</strong>: Best for documents with clear, well-formatted text, providing a good balance of speed and accuracy with precise word-level bounding boxes. But struggles a lot with handwriting or ‘noisy’ documents (e.g.&nbsp;scanned documents).</li>
<li><strong>PaddleOCR (option ‘paddle’)</strong>: More powerful than Tesseract, but slower. Does a decent job with unclear typed text on scanned documents. Also, bounding boxes may not all be accurate as they will be calculated from the line-level bounding boxes produced by Paddle after analysis.</li>
<li><strong>VLM (option ‘vlm’)</strong>: Recommended for use with the Qwen-3-VL 8B model (can set this with the SELECTED_LOCAL_TRANSFORMERS_VLM_MODEL environment variable in config.py). This model is extremely good at identifying difficult to read handwriting and noisy documents. However, it is much slower than the above options. Other models are available as you can see in the tools/run_vlm.py code file. This will conduct inference with the transformers package, and quantise with bitsandbytes if the QUANTISE_VLM_MODELS environment variable is set to True. Inference with this package is <em>much</em> slower than with e.g.&nbsp;llama.cpp or vllm servers, which can be used with the inference-server options described below.</li>
<li><strong>Inference server (option ‘inference-server’)</strong>: This can be used with OpenAI compatible API endpoints, for example <a href="https://github.com/ggml-org/llama.cpp">llama-cpp using llama-server</a>, or <a href="https://docs.vllm.ai/en/stable">vllm</a>. Both of these options will be much faster for inference than the VLM ‘in-app’ model calls described above, and produce results of a similar quality, but you will need to be able to set up the server separately.</li>
<li><strong>AWS Bedrock VLM (option ‘AWS Bedrock VLM OCR - all PDF types’)</strong>: When SHOW_BEDROCK_VLM_MODELS is True, this option appears in the text extraction method list. It uses a Bedrock vision model (e.g.&nbsp;Qwen VL) to perform OCR and optional person/signature detection in the cloud. No local GPU is required; AWS credentials and Bedrock model access are needed. Useful for PDFs and images when you prefer not to run VLMs locally.</li>
</ul>
<section id="hybrid-options" class="level4">
<h4 class="anchored" data-anchor-id="hybrid-options">Hybrid options</h4>
<p>If the SHOW_HYBRID_MODELS environment variable is set to ‘True’ in your app_config.env file, you will see the hybrid model options available. The hybrid models call a smaller model (paddleOCR) to first identify bounding box position and text, and then pass text sections with low confidence to a more performant model (served in app or via an inference server such as llama.cpp or vllm) to suggest for replacement. <strong>Note:</strong> I have not found that the results from this analysis is significantly better than that from e.g.&nbsp;Paddle or VLM/inference server analysis alone (particularly when using Qwen 3 VL), but are provided for comparison.</p>
<ul>
<li><strong>Hybrid-paddle-vlm</strong>: This uses PaddleOCR’s line-level detection with a VLM’s advanced recognition capabilities. PaddleOCR is better at identifying bounding boxes for difficult documents, and so this is probably the most usable of the three options, if you can get both Paddle and the VLM model working in the same environment.</li>
<li><strong>Hybrid-paddle-inference-server</strong>: This uses PaddleOCR’s line-level detection with an inference server’s advanced recognition capabilities. This is the same as the Hybrid-paddle-vlm option, but uses an inference server instead of a VLM model. This allows for the use of GGUF or AWQ/GPTQ quantised models via llama.cpp or vllm servers.</li>
</ul>
</section>
</section>
<section id="inference-server-options" class="level3">
<h3 class="anchored" data-anchor-id="inference-server-options">Inference server options</h3>
<p>If using a local inference server, I would suggest using (llama.cpp)[https://github.com/ggml-org/llama.cpp] as it is much faster than transformers/torch inference, and it will offload to cpu/ram automatically rather than failing as vllm tends to do. Here is the run command I use for my llama server locally ion a wsl or linux environment) to get deterministic results (need at least 16GB of VRAM to run with all gpu layers assigned to your graphics card to use the following model):</p>
<pre><code>llama-server \
    -hf unsloth/Qwen3-VL-30B-A3B-Instruct-GGUF:UD-Q4_K_XL \
    --n-gpu-layers 99 \
    --jinja \
    --temp 0 \
    --top-k 1 \
    --top-p 1 \
    --min-p 1 \
    --frequency-penalty 1 \
    --presence-penalty 1 \
    --flash-attn on \
    --ctx-size 8192 \
    --host 0.0.0.0 \
    --port 7862 \
    --image-min-tokens 1600 \
    --image-max-tokens 2301 \
    --no-warmup \
    --n-cpu-moe 13</code></pre>
<p>If running llama.cpp on the same computer as the doc redaction app, you can then set the following variable in config/app_config.env to run:</p>
<pre><code>SHOW_INFERENCE_SERVER_VLM_OPTIONS=True
INFERENCE_SERVER_API_URL=http://localhost:7862</code></pre>
</section>
<section id="identifying-people-and-signatures-with-vlms" class="level3">
<h3 class="anchored" data-anchor-id="identifying-people-and-signatures-with-vlms">Identifying people and signatures with VLMs</h3>
<p>If VLM or inference server options are enabled, you can also use the VLM to identify photos of people’s faces and signatures in the document, and redact them accordingly.</p>
<p>On the ‘Redaction Settings’ tab, select the CUSTOM_VLM_PERSON and CUSTOM_VLM_SIGNATURE entities. When you conduct an OCR task with the VLM or inference server, it will identify the bounding boxes for photos of people’s faces and signatures in the document, and redact them accordingly if a redaction option is selected.</p>
</section>
<section id="pii-identification-with-llms" class="level3">
<h3 class="anchored" data-anchor-id="pii-identification-with-llms">PII identification with LLMs</h3>
<p>In addition to rule-based (Local) and AWS Comprehend PII detection, the app can use <strong>Large Language Models (LLMs)</strong> to identify and label personal information. This is useful for entity types that are context-dependent (e.g.&nbsp;job titles, organisation names) or when you want custom instructions (e.g.&nbsp;“do not redact the name of the university”). LLM-based PII can be run via <strong>AWS Bedrock</strong>, a <strong>local transformers</strong> model, or an <strong>inference server</strong> (e.g.&nbsp;llama.cpp, vLLM).</p>
<p><strong>Options (when enabled by your administrator):</strong></p>
<ul>
<li><strong>LLM (AWS Bedrock)</strong>: Uses a Bedrock model (e.g.&nbsp;Claude, Nova) for PII detection. Requires AWS credentials and Bedrock model access. No local GPU needed.</li>
<li><strong>Local transformers LLM</strong>: Runs a Hugging Face transformers model on your machine for PII detection. Requires sufficient RAM/VRAM and model download.</li>
<li><strong>Local inference server</strong>: Sends text to an OpenAI-compatible API (e.g.&nbsp;llama.cpp, vLLM) for PII detection. You run the server separately; the app only calls the API.</li>
</ul>
<p><strong>Enabling LLM PII options</strong></p>
<p>Visibility of these methods is controlled by config (e.g.&nbsp;<code>app_config.env</code>):</p>
<ul>
<li><strong>SHOW_AWS_BEDROCK_LLM_MODELS</strong> / <strong>SHOW_AWS_PII_DETECTION_OPTIONS</strong>: Show “LLM (AWS Bedrock)” in the PII identification dropdown.</li>
<li><strong>SHOW_TRANSFORMERS_LLM_PII_DETECTION_OPTIONS</strong>: Show “Local transformers LLM”.</li>
<li><strong>SHOW_INFERENCE_SERVER_PII_OPTIONS</strong>: Show “Local inference server”.</li>
</ul>
<p>On the <strong>‘Redact PDFs/images’</strong> tab, under <strong>‘Redaction settings’</strong>, choose the desired <strong>PII identification</strong> method (e.g.&nbsp;“LLM (AWS Bedrock)”). You can then:</p>
<ul>
<li>Select which <strong>LLM entities</strong> to detect (e.g.&nbsp;NAME, EMAIL_ADDRESS, PHONE_NUMBER, ADDRESS, CUSTOM).</li>
<li>Optionally add <strong>custom instructions</strong> (e.g.&nbsp;“Do not redact company names” or “Redact all organisation names with the label ORGANISATION”).</li>
</ul>
<p>Model choice (Bedrock model ID, inference server URL, or local model name) and parameters (temperature, max tokens) are typically set in <strong>Settings</strong> or via environment variables; see the App settings / config documentation for your deployment.</p>
</section>
</section>
<section id="document-summarisation-tab" class="level2">
<h2 class="anchored" data-anchor-id="document-summarisation-tab">Document summarisation tab</h2>
<p>When summarisation is enabled (e.g.&nbsp;<strong>SHOW_SUMMARISATION</strong> and at least one LLM option available), a <strong>Document summarisation</strong> tab is shown in the app. It lets you generate LLM-based summaries from OCR output CSVs (e.g.&nbsp;from a previous redaction run).</p>
<p><strong>How to use the Document summarisation tab</strong></p>
<ol type="1">
<li><strong>Upload OCR output files</strong>: In the summarisation tab, use “Upload one or multiple ‘ocr_output.csv’ files to summarise” to attach one or more <code>*_ocr_output.csv</code> files (produced by the redaction pipeline when you extract text from PDFs/images).</li>
<li><strong>Summarisation settings</strong> (accordion):
<ul>
<li><strong>Choose LLM inference method for summarisation</strong>: e.g.&nbsp;“LLM (AWS Bedrock)”, “Local transformers LLM”, or “Local inference server”, depending on what is enabled.</li>
<li><strong>Temperature</strong>: Controls randomness (lower is more deterministic).</li>
<li><strong>Max pages per page-group summary</strong>: Limits how many pages are summarised together before recursive summarisation.</li>
<li><strong>API Key (if required)</strong>: For providers that need an API key.</li>
<li><strong>Additional context (optional)</strong>: Short description of the document type (e.g.&nbsp;“This is a partnership agreement”).</li>
<li><strong>Summary format</strong>: <strong>Concise</strong> (key themes only) or <strong>Detailed</strong> (as much detail as possible).</li>
<li><strong>Additional summary instructions (optional)</strong>: e.g.&nbsp;“Focus on key obligations and termination clauses”.</li>
</ul></li>
<li><strong>Generate summary</strong>: Click <strong>“Generate summary”</strong> to run the summarisation. The app groups pages, calls the LLM, and optionally recurses if the combined summary is long.</li>
<li><strong>Outputs</strong>: When finished, you can download summary files and view the summary in the tab.</li>
</ol>
<p>Summarisation uses the same LLM/inference settings as configured for the app (AWS region, inference server URL, etc.). For batch or scripted summarisation, use the CLI <code>--task summarise</code> (see Command Line Interface).</p>
</section>
<section id="command-line-interface-cli" class="level2">
<h2 class="anchored" data-anchor-id="command-line-interface-cli">Command Line Interface (CLI)</h2>
<p>The app includes a comprehensive command-line interface (<code>cli_redact.py</code>) that allows you to perform redaction, deduplication, AWS Textract batch operations, and document summarisation directly from the terminal. This is particularly useful for batch processing, automation, and integration with other systems.</p>
<section id="getting-started-with-the-cli" class="level3">
<h3 class="anchored" data-anchor-id="getting-started-with-the-cli">Getting started with the CLI</h3>
<p>To use the CLI, you need to:</p>
<ol type="1">
<li>Open a terminal window</li>
<li>Navigate to the app folder containing <code>cli_redact.py</code></li>
<li>Activate your virtual environment (conda or venv)</li>
<li>Run commands using <code>python cli_redact.py</code> followed by your options</li>
</ol>
</section>
<section id="basic-cli-syntax" class="level3">
<h3 class="anchored" data-anchor-id="basic-cli-syntax">Basic CLI syntax</h3>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb7"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> [redact<span class="kw">|</span><span class="ex">deduplicate</span><span class="kw">|</span><span class="ex">textract</span><span class="kw">|</span><span class="ex">summarise]</span> <span class="at">--input_file</span> <span class="pp">[</span><span class="ss">file_path</span><span class="pp">]</span> <span class="pp">[</span><span class="ss">additional_options</span><span class="pp">]</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p>Default task is <code>redact</code> if <code>--task</code> is omitted.</p>
</section>
<section id="redaction-examples" class="level3">
<h3 class="anchored" data-anchor-id="redaction-examples">Redaction examples</h3>
<p><strong>Basic PDF redaction with default settings:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb8"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/example_of_emails_sent_to_a_professor_before_applying.pdf</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Extract text only (no redaction) with whole page redaction:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb9"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/Partnership-Agreement-Toolkit_0_0.pdf <span class="at">--redact_whole_page_file</span> example_data/partnership_toolkit_redact_some_pages.csv <span class="at">--pii_detector</span> None</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Redact with custom entities and allow list:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/graduate-job-example-cover-letter.pdf <span class="at">--allow_list_file</span> example_data/test_allow_list_graduate.csv <span class="at">--local_redact_entities</span> TITLES PERSON DATE_TIME</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Redact with fuzzy matching and custom deny list:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/Partnership-Agreement-Toolkit_0_0.pdf <span class="at">--deny_list_file</span> example_data/Partnership-Agreement-Toolkit_test_deny_list_para_single_spell.csv <span class="at">--local_redact_entities</span> CUSTOM_FUZZY <span class="at">--page_min</span> 1 <span class="at">--page_max</span> 3 <span class="at">--fuzzy_mistakes</span> 3</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Redact with AWS services:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb12"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/example_of_emails_sent_to_a_professor_before_applying.pdf <span class="at">--ocr_method</span> <span class="st">"AWS Textract"</span> <span class="at">--pii_detector</span> <span class="st">"AWS Comprehend"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Redact specific pages with signature extraction:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb13"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/Partnership-Agreement-Toolkit_0_0.pdf <span class="at">--page_min</span> 6 <span class="at">--page_max</span> 7 <span class="at">--ocr_method</span> <span class="st">"AWS Textract"</span> <span class="at">--handwrite_signature_extraction</span> <span class="st">"Extract handwriting"</span> <span class="st">"Extract signatures"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Redact with LLM PII (entity subset and custom instructions):</strong><br>
When your deployment uses an LLM-based PII method (e.g.&nbsp;via config/defaults), you can pass LLM entities and instructions:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/example_of_emails_sent_to_a_professor_before_applying.pdf <span class="at">--llm_redact_entities</span> NAME EMAIL_ADDRESS PHONE_NUMBER ADDRESS CUSTOM <span class="at">--custom_llm_instructions</span> <span class="st">"Do not redact the name of the university."</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="tabular-data-redaction" class="level3">
<h3 class="anchored" data-anchor-id="tabular-data-redaction">Tabular data redaction</h3>
<p><strong>Anonymize CSV file with specific columns:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/combined_case_notes.csv <span class="at">--text_columns</span> <span class="st">"Case Note"</span> <span class="st">"Client"</span> <span class="at">--anon_strategy</span> replace_redacted</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Anonymize Excel file:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb16"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> example_data/combined_case_notes.xlsx <span class="at">--text_columns</span> <span class="st">"Case Note"</span> <span class="st">"Client"</span> <span class="at">--excel_sheets</span> combined_case_notes <span class="at">--anon_strategy</span> redact</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Anonymize Word document:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb17"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--input_file</span> <span class="st">"example_data/Bold minimalist professional cover letter.docx"</span> <span class="at">--anon_strategy</span> replace_redacted</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="duplicate-detection" class="level3">
<h3 class="anchored" data-anchor-id="duplicate-detection">Duplicate detection</h3>
<p><strong>Find duplicate pages in OCR files:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> deduplicate <span class="at">--input_file</span> example_data/example_outputs/doubled_output_joined.pdf_ocr_output.csv <span class="at">--duplicate_type</span> pages <span class="at">--similarity_threshold</span> 0.95</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Find duplicates at line level:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb19"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> deduplicate <span class="at">--input_file</span> example_data/example_outputs/doubled_output_joined.pdf_ocr_output.csv <span class="at">--duplicate_type</span> pages <span class="at">--similarity_threshold</span> 0.95 <span class="at">--combine_pages</span> False <span class="at">--min_word_count</span> 3</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Find duplicate rows in tabular data:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb20"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> deduplicate <span class="at">--input_file</span> example_data/Lambeth_2030-Our_Future_Our_Lambeth.pdf.csv <span class="at">--duplicate_type</span> tabular <span class="at">--text_columns</span> <span class="st">"text"</span> <span class="at">--similarity_threshold</span> 0.95</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="aws-textract-operations" class="level3">
<h3 class="anchored" data-anchor-id="aws-textract-operations">AWS Textract operations</h3>
<p><strong>Submit document for analysis:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb21"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> textract <span class="at">--textract_action</span> submit <span class="at">--input_file</span> example_data/example_of_emails_sent_to_a_professor_before_applying.pdf</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Submit with signature extraction:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb22"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> textract <span class="at">--textract_action</span> submit <span class="at">--input_file</span> example_data/Partnership-Agreement-Toolkit_0_0.pdf <span class="at">--extract_signatures</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Retrieve results by job ID:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb23"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> textract <span class="at">--textract_action</span> retrieve <span class="at">--job_id</span> 12345678-1234-1234-1234-123456789012</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>List recent jobs:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb24"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> textract <span class="at">--textract_action</span> list</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="document-summarisation" class="level3">
<h3 class="anchored" data-anchor-id="document-summarisation">Document summarisation</h3>
<p><strong>Summarise OCR output CSV(s) with AWS Bedrock:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb25"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> summarise <span class="at">--input_file</span> example_data/example_outputs/Partnership-Agreement-Toolkit_0_0.pdf_ocr_output.csv <span class="at">--summarisation_inference_method</span> <span class="st">"LLM (AWS Bedrock)"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Summarise with local LLM and detailed format:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb26"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> summarise <span class="at">--input_file</span> example_data/example_outputs/Partnership-Agreement-Toolkit_0_0.pdf_ocr_output.csv <span class="at">--summarisation_inference_method</span> <span class="st">"Local transformers LLM"</span> <span class="at">--summarisation_format</span> detailed</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Summarise with context and extra instructions (concise format):</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb27"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> summarise <span class="at">--input_file</span> example_data/example_outputs/Partnership-Agreement-Toolkit_0_0.pdf_ocr_output.csv <span class="at">--summarisation_context</span> <span class="st">"This is a partnership agreement"</span> <span class="at">--summarisation_additional_instructions</span> <span class="st">"Focus on key obligations and termination clauses"</span> <span class="at">--summarisation_format</span> concise</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<p><strong>Summarise multiple OCR CSV files:</strong></p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb28"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--task</span> summarise <span class="at">--input_file</span> example_data/example_outputs/Partnership-Agreement-Toolkit_0_0.pdf_ocr_output.csv example_data/example_outputs/example_of_emails_sent_to_a_professor_before_applying_ocr_output_textract.csv <span class="at">--summarisation_inference_method</span> <span class="st">"LLM (AWS Bedrock)"</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="common-cli-options" class="level3">
<h3 class="anchored" data-anchor-id="common-cli-options">Common CLI options</h3>
<section id="general-options" class="level4">
<h4 class="anchored" data-anchor-id="general-options">General options</h4>
<ul>
<li><code>--task</code>: Task to perform: “redact”, “deduplicate”, “textract”, or “summarise” (default: redact)</li>
<li><code>--input_file</code>: Path to input file(s); multiple files separated by spaces</li>
<li><code>--output_dir</code>: Directory for output files (default: output/)</li>
<li><code>--input_dir</code>: Directory for input files (default: input/)</li>
<li><code>--language</code>: Language of document content (e.g.&nbsp;“en”, “es”, “fr”)</li>
<li><code>--username</code>: Username for session tracking</li>
<li><code>--save_to_user_folders</code>: Save outputs under username-based subfolders (True/False)</li>
<li><code>--allow_list</code>: Path to CSV of terms to exclude from redaction (default from config)</li>
<li><code>--pii_detector</code>: PII detection method: “Local”, “AWS Comprehend”, or “None”</li>
<li><code>--local_redact_entities</code>: Local entities to redact (space-separated list)</li>
<li><code>--aws_redact_entities</code>: AWS Comprehend entities to redact (space-separated list)</li>
<li><code>--aws_access_key</code> / <code>--aws_secret_key</code>: AWS credentials for cloud services</li>
<li><code>--aws_region</code>: AWS region for cloud services</li>
<li><code>--s3_bucket</code>: S3 bucket name for cloud operations</li>
<li><code>--cost_code</code>: Cost code for tracking usage</li>
<li><code>--save_outputs_to_s3</code>: Upload output files to S3 after processing (True/False)</li>
<li><code>--s3_outputs_folder</code>: S3 key prefix for output files</li>
<li><code>--s3_outputs_bucket</code>: S3 bucket for outputs (defaults to –s3_bucket if not set)</li>
<li><code>--do_initial_clean</code>: Perform initial text cleaning for tabular data (True/False)</li>
<li><code>--save_logs_to_csv</code>: Save processing logs to CSV (True/False)</li>
<li><code>--save_logs_to_dynamodb</code>: Save processing logs to DynamoDB (True/False)</li>
<li><code>--display_file_names_in_logs</code>: Include file names in log output (True/False)</li>
<li><code>--upload_logs_to_s3</code>: Upload log files to S3 after processing (True/False)</li>
<li><code>--s3_logs_prefix</code>: S3 prefix for usage log files</li>
<li><code>--feedback_logs_folder</code>: Directory for feedback log files</li>
<li><code>--access_logs_folder</code>: Directory for access log files</li>
<li><code>--usage_logs_folder</code>: Directory for usage log files</li>
<li><code>--paddle_model_path</code>: Directory for PaddleOCR model storage</li>
<li><code>--spacy_model_path</code>: Directory for spaCy model storage</li>
</ul>
</section>
<section id="pdfimage-redaction-options" class="level4">
<h4 class="anchored" data-anchor-id="pdfimage-redaction-options">PDF/Image redaction options</h4>
<ul>
<li><code>--ocr_method</code>: Text extraction method: “AWS Textract”, “Local OCR”, or “Local text”</li>
<li><code>--chosen_local_ocr_model</code>: Local OCR model (e.g.&nbsp;“tesseract”, “paddle”, “hybrid-paddle”, “hybrid-vlm”, “inference-server”)</li>
<li><code>--page_min</code> / <code>--page_max</code>: Page range to process (0 for page_max means all pages)</li>
<li><code>--images_dpi</code>: DPI for image processing (default: 300.0)</li>
<li><code>--preprocess_local_ocr_images</code>: Preprocess images before OCR (True/False)</li>
<li><code>--compress_redacted_pdf</code>: Compress the final redacted PDF (True/False)</li>
<li><code>--return_pdf_end_of_redaction</code>: Return PDF at end of redaction (True/False)</li>
<li><code>--allow_list_file</code> / <code>--deny_list_file</code>: Paths to custom allow/deny list CSV files</li>
<li><code>--redact_whole_page_file</code>: Path to CSV listing pages to redact completely</li>
<li><code>--handwrite_signature_extraction</code>: Textract options (“Extract handwriting”, “Extract signatures”)</li>
<li><code>--extract_forms</code>: Extract forms during Textract analysis (flag)</li>
<li><code>--extract_tables</code>: Extract tables during Textract analysis (flag)</li>
<li><code>--extract_layout</code>: Extract layout during Textract analysis (flag)</li>
<li><code>--vlm_model_choice</code>: VLM model for OCR (e.g.&nbsp;Bedrock model ID when using cloud VLM)</li>
<li><code>--inference_server_vlm_model</code>: Inference server VLM model name for OCR</li>
<li><code>--inference_server_api_url</code>: Inference server API URL for VLM OCR</li>
<li><code>--gemini_api_key</code>: Google Gemini API key for VLM OCR</li>
<li><code>--azure_openai_api_key</code>: Azure OpenAI API key for VLM OCR</li>
<li><code>--azure_openai_endpoint</code>: Azure OpenAI endpoint URL for VLM OCR</li>
<li><code>--efficient_ocr</code>: Use efficient OCR: try selectable text first per page, run OCR only when needed (flag)</li>
<li><code>--no_efficient_ocr</code>: Disable efficient OCR (flag)</li>
<li><code>--efficient_ocr_min_words</code>: Min words on page to use text-only route; below this use OCR (default from config)</li>
</ul>
</section>
<section id="llm-pii-detection-options" class="level4">
<h4 class="anchored" data-anchor-id="llm-pii-detection-options">LLM PII detection options</h4>
<p>Used when the PII method is LLM-based (e.g.&nbsp;via config/defaults). Model used depends on inference method.</p>
<ul>
<li><code>--llm_model_choice</code>: LLM model for PII (e.g.&nbsp;Bedrock model ID); defaults to config CLOUD_LLM_PII_MODEL_CHOICE for Bedrock</li>
<li><code>--llm_inference_method</code>: “aws-bedrock”, “local”, “inference-server”, “azure-openai”, or “gemini”</li>
<li><code>--inference_server_pii_model</code>: Inference server PII detection model name</li>
<li><code>--llm_temperature</code>: Temperature for LLM PII (lower = more deterministic)</li>
<li><code>--llm_max_tokens</code>: Max tokens in LLM response for PII detection</li>
<li><code>--llm_redact_entities</code>: LLM entities to detect (space-separated, e.g.&nbsp;NAME, EMAIL_ADDRESS, PHONE_NUMBER, ADDRESS, CUSTOM)</li>
<li><code>--custom_llm_instructions</code>: Custom instructions for LLM entity detection (e.g.&nbsp;“Do not redact company names”)</li>
</ul>
</section>
<section id="tabularword-anonymization-options" class="level4">
<h4 class="anchored" data-anchor-id="tabularword-anonymization-options">Tabular/Word anonymization options</h4>
<ul>
<li><code>--anon_strategy</code>: One of “redact”, “redact completely”, “replace_redacted”, “entity_type”, “encrypt”, “hash”, “replace with ‘REDACTED’”, “replace with <entity_name>”, “mask”, “fake_first_name”</entity_name></li>
<li><code>--text_columns</code>: Column names to anonymise or use for deduplication (space-separated)</li>
<li><code>--excel_sheets</code>: Excel sheet names to process (space-separated)</li>
<li><code>--fuzzy_mistakes</code>: Allowed spelling mistakes for fuzzy matching (default: 0)</li>
<li><code>--match_fuzzy_whole_phrase_bool</code>: Match fuzzy whole phrase (True/False)</li>
<li><code>--do_initial_clean</code>: Initial text cleaning for tabular data (True/False)</li>
</ul>
</section>
<section id="duplicate-detection-options" class="level4">
<h4 class="anchored" data-anchor-id="duplicate-detection-options">Duplicate detection options</h4>
<ul>
<li><code>--duplicate_type</code>: Type of duplicate detection (“pages” for OCR files or “tabular” for CSV/Excel)</li>
<li><code>--similarity_threshold</code>: Similarity threshold (0-1) to consider content as duplicates (default: 0.95)</li>
<li><code>--min_word_count</code>: Minimum word count for text to be considered (default: 10)</li>
<li><code>--min_consecutive_pages</code>: Minimum number of consecutive pages to consider as a match (default: 1)</li>
<li><code>--greedy_match</code>: Use greedy matching strategy for consecutive pages (True/False)</li>
<li><code>--combine_pages</code>: Combine text from same page number within a file (True/False)</li>
<li><code>--remove_duplicate_rows</code>: Remove duplicate rows from output (True/False)</li>
</ul>
</section>
<section id="document-summarisation-options" class="level4">
<h4 class="anchored" data-anchor-id="document-summarisation-options">Document summarisation options</h4>
<ul>
<li><code>--summarisation_inference_method</code>: “LLM (AWS Bedrock)”, “Local transformers LLM”, or “Local inference server”</li>
<li><code>--summarisation_temperature</code>: Temperature for summarisation (0.0–2.0; default: 0.6)</li>
<li><code>--summarisation_max_pages_per_group</code>: Max pages per page-group summary (default: 30)</li>
<li><code>--summarisation_api_key</code>: API key if required by the chosen LLM</li>
<li><code>--summarisation_context</code>: Additional context (e.g.&nbsp;“This is a consultation response document”)</li>
<li><code>--summarisation_format</code>: “concise” (key themes) or “detailed” (default)</li>
<li><code>--summarisation_additional_instructions</code>: Extra instructions (e.g.&nbsp;“Focus on key decisions and recommendations”)</li>
</ul>
</section>
<section id="textract-batch-operations-options" class="level4">
<h4 class="anchored" data-anchor-id="textract-batch-operations-options">Textract batch operations options</h4>
<ul>
<li><code>--textract_action</code>: “submit”, “retrieve”, or “list”</li>
<li><code>--job_id</code>: Textract job ID for retrieve action</li>
<li><code>--extract_signatures</code>: Extract signatures during Textract analysis (flag)</li>
<li><code>--textract_bucket</code>: S3 bucket for Textract operations</li>
<li><code>--textract_input_prefix</code>: S3 prefix for input files in Textract operations</li>
<li><code>--textract_output_prefix</code>: S3 prefix for output files in Textract operations</li>
<li><code>--s3_textract_document_logs_subfolder</code>: S3 prefix for Textract job logs</li>
<li><code>--local_textract_document_logs_subfolder</code>: Local path for Textract job logs</li>
<li><code>--poll_interval</code>: Polling interval in seconds for job status (default: 30)</li>
<li><code>--max_poll_attempts</code>: Max polling attempts before timeout (default: 120)</li>
</ul>
</section>
</section>
<section id="output-files" class="level3">
<h3 class="anchored" data-anchor-id="output-files">Output files</h3>
<p>The CLI generates the same output files as the GUI: - <code>...redacted.pdf</code>: Final redacted document - <code>...redactions_for_review.pdf</code>: Document with redaction boxes for review - <code>...review_file.csv</code>: Detailed redaction information - <code>...ocr_results.csv</code>: Extracted text results - <code>..._textract.json</code>: AWS Textract results (if applicable)</p>
<p>For more advanced options and configuration, refer to the help text by running:</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb29"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="ex">python</span> cli_redact.py <span class="at">--help</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>


</section>
</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/seanpedrick-case\.github\.io\/doc_redaction\/");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>